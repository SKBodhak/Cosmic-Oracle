<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Oracle | Shyam Bodhak</title>
    <link rel="icon" type="image/x-icon" href="icon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ================================================= */
        /* === 1. COSMIC IDENTITY CORE VARIABLES (MERGED) === */
        /* ================================================= */
        :root {
            --bg-deep: #05070a;
            --glass-surface: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent-cyan: #00d2ff;
            --accent-purple: #9b5de5;
            --bmc-yellow: #FFDD00;
            --text-white: #ffffff;
            --text-gray: #a0a0a0;
            --color-error: #ef4444; /* Added for red cross */
            
            /* Dynamic Link Color for About Section (Default Blue) */
            --about-link-color: #007bff; 
            /* NEW: Fallback background for about section when data is missing */
            --about-fallback-bg: rgba(25, 10, 30, 0.95); 
        }

        /* === GLOBAL RESET (FROM ORACLE) === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }
        
        /* ================================================= */
        /* === 2. MODIFIED BODY STYLES (ORACLE & IDENTITY) === */
        /* ================================================= */
        /* MODIFIED: Removed height/width 100vh/100vw and changed overflow to auto/scroll */
        body {
            font-family: 'Poppins', sans-serif; /* Use Poppins as primary now */
            overflow-y: scroll; /* Allow body scrolling for full-page scroll */
            background-color: transparent; /* Rely on cosmic background gradient */
            color: var(--text-white);
            /* height: 100vh; */ /* REMOVED */
            /* width: 100vw; */ /* REMOVED */
            -webkit-user-select: none;
            user-select: none;
            cursor: default;
            overflow-x: hidden;
            position: relative;
            font-size: 18px; 
            min-height: 100vh; /* Ensure it covers the viewport minimum */
        }
        
        /* FIX 1: Prevent body scroll when the Oracle's card detail modal is active */
        body.modal-open {
            overflow: hidden !important;
        }

        /* FIX 2: Identity Sidebar override - This style is applied by the Identity JS when sidebar is open */
        .sidebar.active ~ .container {
             /* When sidebar is active, ensure the main content doesn't break fixed layout */
             pointer-events: none;
        }


        /* ================================================= */
        /* === 3. COSMIC BACKGROUNDS (ORACLE DOMINANT) === */
        /* ================================================= */
        /* RETAIN FIXED POSITION so the background doesn't scroll with content */
        .cosmic-background, .universe {
            position: fixed; /* Keep fixed so content scrolls over it */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3; 
            background: linear-gradient(45deg, #0a0e27, #1a0033, #0f172a, #1e1b4b);
            background-size: 400% 400%;
            animation: cosmicGradient 15s ease infinite;
        }

        @keyframes cosmicGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* RETAIN FIXED POSITION so the starfield doesn't scroll with content */
        .starfield {
            position: fixed; 
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

        /* RETAIN FIXED POSITION for particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            animation: float linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px);
                opacity: 0;
            }
        }
        
        /* Identity Stars */
        .stars {
            position: absolute; width: 1px; height: 1px;
            background: transparent;
            box-shadow: 10vw 10vh #fff, 20vw 30vh #fff, 40vw 60vh #fff, 60vw 20vh #fff, 80vw 80vh #fff, 90vw 10vh #fff;
            animation: driftStars 100s linear infinite;
            opacity: 0.6;
        }
        .stars:after {
            content: ''; position: absolute; top: 2000px; width: 1px; height: 1px;
            box-shadow: 10vw 10vh #fff, 20vw 30vh #fff, 40vw 60vh #fff, 60vw 20vh #fff, 80vw 80vh #fff, 90vw 10vh #fff;
        }

        @keyframes driftStars { from { transform: translateY(0); } to { transform: translateY(-2000px); } }

        /* ================================================= */
        /* === 4. COSMIC IDENTITY MENU (NEW) STYLES === */
        /* ================================================= */

        /* --- MENU BUTTON (No Change) --- */
        #menu-trigger {
            position: fixed; 
            top: 30px; 
            left: 30px; /* Base position: Top Left */
            width: 55px; height: 55px;
            border-radius: 50%;
            background: var(--glass-surface);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
            color: var(--text-white);
            font-size: 24px;
            cursor: pointer;
            z-index: 50; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            display: flex; align-items: center; justify-content: center;
        }

        #menu-trigger:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 210, 255, 0.3);
            border-color: var(--accent-cyan);
        }

        #menu-trigger.hidden {
            opacity: 0;
            transform: scale(0) rotate(90deg);
            pointer-events: none;
        }

        /* --- SIDEBAR (No Change) --- */
        .sidebar {
            position: fixed; top: 0; left: 0; height: 100%; width: 320px;
            background: rgba(10, 12, 20, 0.95); 
            backdrop-filter: blur(25px);
            transform: translateX(-100%);
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 100; 
            display: flex; flex-direction: column;
            border-right: 1px solid var(--glass-border);
            box-shadow: 10px 0 30px rgba(0,0,0,0.5);
        }

        .sidebar.active { transform: translateX(0); }

        .sidebar-header {
            padding: 60px 20px 30px;
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
            position: relative;
        }

        /* UNIFIED CLOSE BUTTON STYLING */
        .close-btn-style {
            position: absolute; 
            top: 20px; 
            right: 20px; 
            background: none; 
            border: none; 
            color: var(--color-error); /* Set to red */
            opacity: 1; /* Ensure full visibility */
            font-size: 32px; 
            font-weight: 700;
            cursor: pointer; 
            transition: transform 0.3s ease, color 0.3s, background 0.3s;
            z-index: 10;
            width: 40px; 
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .close-btn-style:hover { 
            color: var(--text-white); 
            background: rgba(255, 59, 59, 0.3); /* Subtle red background on hover */
            transform: rotate(90deg); 
            opacity: 1; /* Keep opacity solid on hover */
        }

        /* Applying the unified style to the sidebar close button */
        .close-sidebar {
            /* Inherit all properties from .close-btn-style for unified look */
            position: absolute; 
            top: 20px; 
            right: 20px; 
            color: var(--color-error); 
            font-size: 32px; 
            font-weight: 700;
            cursor: pointer; 
            transition: transform 0.3s ease, color 0.3s, background 0.3s;
            width: 40px; 
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
        }
        .close-sidebar:hover { 
            color: var(--text-white); 
            background: rgba(255, 59, 59, 0.3);
            transform: rotate(90deg); 
        }


        /* Avatar Logic - MODIFIED: Added pointer-events default/disabled states */
        .avatar-wrapper {
            width: 100px; height: 100px; margin: 0 auto 15px;
            border-radius: 50%;
            position: relative;
            padding: 3px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            box-shadow: 0 0 25px rgba(0, 210, 255, 0.2);
            cursor: pointer;
            transition: transform 0.3s ease;
            
            /* FIX: Default state is disabled on main page load */
            pointer-events: none; 
            opacity: 0.5;
        }
        
        /* State when menu OR identity page is active */
        .avatar-wrapper.clickable {
             pointer-events: auto;
             opacity: 1;
        }

        .avatar-wrapper:hover {
            transform: scale(1.05);
            box-shadow: 0 0 35px rgba(0, 210, 255, 0.4);
        }

        .avatar-img, .avatar-initials {
            width: 100%; height: 100%;
            border-radius: 50%;
            object-fit: cover;
            background: #151922;
            border: 3px solid #151922;
            display: block;
            /* FIX: Removed pointer-events: auto; from here and moved to .avatar-wrapper.clickable */
        }

        .avatar-initials {
            display: flex; align-items: center; justify-content: center;
            font-size: 36px; font-weight: 700; color: var(--text-white);
        }

        /* Navigation (No Change) */
        .nav-list { flex: 1; padding: 30px 0; display: flex; flex-direction: column; gap: 5px; }

        .nav-item {
            padding: 15px 30px;
            text-decoration: none;
            color: var(--text-gray);
            font-size: 18px;
            font-weight: 300;
            transition: 0.3s;
            display: flex; align-items: center; gap: 15px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .nav-item::before {
            content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
            background: var(--accent-cyan);
            transform: scaleY(0); transition: 0.3s;
        }

        .nav-item:hover {
            color: var(--text-white);
            background: rgba(255,255,255,0.03);
            padding-left: 35px;
        }
        .nav-item:hover::before { transform: scaleY(1); }

        /* Footer Section (No Change) */
        .menu-footer {
            padding: 30px;
            text-align: center;
            background: rgba(0,0,0,0.3);
        }

        /* --- IDENTITY OVERLAY (MODAL) - (No Change) --- */
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 200;
            opacity: 0; pointer-events: none;
            transition: opacity 0.4s ease;
            display: flex; align-items: center; justify-content: center;
        }

        .modal-backdrop.active { opacity: 1; pointer-events: all; }

        .profile-card {
            width: 90%; max-width: 450px; 
            background: rgba(20, 25, 40, 0.7);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 24px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            transform: scale(0.9) translateY(20px);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .modal-backdrop.active .profile-card { transform: scale(1) translateY(0); }

        .profile-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(0, 210, 255, 0.1) 0%, transparent 60%);
            z-index: -1; pointer-events: none;
        }

        .card-name { margin-top: 15px; font-size: 26px; font-weight: 700; }
        .card-handle { color: var(--accent-cyan); margin-bottom: 25px; font-size: 14px; letter-spacing: 1px; }

        /* Bio Section */
        .bio-container { text-align: left; margin-bottom: 30px; }
        .bio-label { font-size: 11px; font-weight: 700; color: var(--accent-purple); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        .bio-box {
            position: relative; color: var(--text-gray); font-size: 14px;
            line-height: 1.6; font-style: italic; background: rgba(255,255,255,0.03);
            padding: 15px 15px 15px 20px; border-radius: 0 10px 10px 0;
            border-left: 3px solid var(--accent-cyan);
        }
        .bio-box i { color: rgba(255,255,255,0.1); position: absolute; top: 10px; right: 10px; font-size: 20px; }

        /* Buttons & Grid */
        .bmc-btn {
            display: flex; align-items: center; justify-content: center;
            background: var(--bmc-yellow); color: #000; text-decoration: none;
            font-weight: 600; font-size: 16px; padding: 15px; border-radius: 50px;
            transition: 0.3s; box-shadow: 0 5px 15px rgba(255, 221, 0, 0.2);
            margin-bottom: 25px;
        }
        .bmc-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(255, 221, 0, 0.4); }
        .bmc-btn i { margin-right: 10px; font-size: 18px; }

        .social-grid { display: flex; justify-content: center; gap: 20px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 25px; }
        .social-icon {
            width: 50px; height: 50px; border-radius: 12px;
            background: rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center;
            color: var(--text-white); text-decoration: none; font-size: 22px;
            transition: 0.3s; border: 1px solid transparent;
        }
        .social-icon:hover {
            background: rgba(255,255,255,0.1); transform: translateY(-3px);
            border-color: var(--accent-purple); box-shadow: 0 5px 15px rgba(155, 93, 229, 0.3);
        }
        .social-icon svg { width: 22px; height: 22px; fill: currentColor; }


        /* --- ABOUT OVERLAY (SMART FALLBACK SYSTEM) --- */
        .about-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 250; 
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none;
            transition: opacity 0.5s ease, background-color 0.5s ease;
            /* Default background color set by JS, but fallback set here: */
            background-color: var(--about-fallback-bg); 
        }

        .about-overlay.active { opacity: 1; pointer-events: all; }

        .about-container {
            width: 100%; max-width: 900px;
            padding: 40px;
            text-align: center;
            opacity: 0; 
            transition: opacity 0.5s ease;
            transform: translateY(20px);
            /* --- FIX: Added Max-Height and Scroll --- */
            max-height: 90vh; /* Limit height to 90% of viewport */
            overflow-y: auto; /* Enable vertical scrolling */
            /* -------------------------------------- */
        }

        .about-overlay.active .about-container { opacity: 1; transform: translateY(0); }

        .about-title { font-size: 3rem; margin-bottom: 20px; margin-top: 0; transition: color 0.3s; }
        .about-content { font-size: 1.2rem; white-space: pre-wrap; line-height: 1.6; transition: color 0.3s; }

        /* Dynamic Links inside About Section */
        .about-content a {
            color: var(--about-link-color);
            font-weight: bold;
            text-decoration: underline;
            transition: opacity 0.2s;
        }
        .about-content a:hover { opacity: 0.8; }


        /* --- SECURE IMAGE VIEWER (No Change) --- */
        .image-viewer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 300;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(8px);
        }

        .image-viewer.active { display: flex; opacity: 1; }

        .image-viewer img {
            max-width: 90%; max-height: 90%;
            border-radius: 12px;
            box-shadow: 0 0 50px rgba(0, 210, 255, 0.2);
            pointer-events: none;
            user-select: none;
        }

        .viewer-fallback {
            display: none; flex-direction: column; align-items: center; justify-content: center;
            color: white; z-index: 302; pointer-events: none;
            animation: fadeIn 0.5s ease;
        }

        .fallback-circle {
            width: 150px; height: 150px; border-radius: 50%; border: 4px solid var(--accent-cyan);
            display: flex; align-items: center; justify-content: center;
            font-size: 64px; font-weight: 700; margin-bottom: 30px; text-transform: uppercase;
            background: radial-gradient(circle, rgba(0, 210, 255, 0.2), transparent);
            box-shadow: 0 0 40px rgba(0, 210, 255, 0.3);
        }

        .fallback-name { font-size: 28px; font-weight: 600; letter-spacing: 1px; }
        .fallback-title { font-size: 16px; color: var(--accent-purple); letter-spacing: 2px; text-transform: uppercase; margin-top: 5px; }

        @keyframes fadeIn { from {opacity: 0; transform: scale(0.9);} to {opacity: 1; transform: scale(1);} }
        .image-protection-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 301; }
        
        
        /* ==================================== */
        /* === IDENTITY RESPONSIVENESS === */
        /* ==================================== */

        /* --- TABLET/SMALL DESKTOP (Max 1024px) --- */
        @media (max-width: 1024px) {
            
            #menu-trigger {
                top: 20px;
                left: 20px;
                width: 50px;
                height: 50px;
                font-size: 22px;
            }
            
            /* Profile Card (Identity Modal) */
            .profile-card {
                max-width: 400px;
            }
        }

        /* --- MOBILE (Max 768px) --- */
        @media (max-width: 768px) {
            
            /* MENU BUTTON FIX: Force Top Left on mobile */
            #menu-trigger {
                top: 15px;
                left: 15px; 
                right: auto; 
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            
            /* Sidebar - Full Screen Overlay on Mobile */
            .sidebar {
                width: 100%;
                max-width: 100%;
                border-right: none;
                overflow-y: auto; 
            }
            
            .sidebar-header {
                padding: 40px 20px 25px;
            }
            
            /* Identity Modal */
            .profile-card {
                width: 95%;
                padding: 30px 20px;
                max-height: 95vh; 
                overflow-y: auto;
            }

            .card-name { font-size: 24px; }
            .card-handle { font-size: 12px; }
            .social-grid { gap: 10px; }
            .social-icon { width: 45px; height: 45px; font-size: 20px; }
            
            /* About Overlay */
            .about-container {
                padding: 20px;
            }
            
            .about-title {
                font-size: 2rem; 
                margin-top: 50px; 
            }
            
            .about-content {
                font-size: 1rem; 
            }

            /* Image Viewer Fallback */
            .fallback-circle {
                width: 120px; 
                height: 120px;
                font-size: 50px;
            }
            
            .fallback-name { font-size: 24px; }
            .fallback-title { font-size: 14px; }

            /* MODIFIED: Increased top padding for mobile to push content down */
            .container {
                padding-top: 120px !important; 
            }
        }

        /* --- Landscape Mobile (Max 736px, Min 320px) --- */
        @media (max-height: 500px) and (max-width: 736px) {
            /* Adjust padding and font size for very limited vertical space (landscape mode) */
            .sidebar-header { padding: 20px; }
            .avatar-wrapper { margin: 0 auto 10px; width: 80px; height: 80px; }
            .nav-list { padding: 10px 0; gap: 0; }
            .nav-item { padding: 10px 20px; font-size: 14px; }
            .menu-footer { padding: 15px; }
            
            .profile-card { padding: 20px; }
            .bio-container { margin-bottom: 15px; }
            .bmc-btn { padding: 10px; font-size: 14px; margin-bottom: 15px; }
        }


        /* ================================================= */
        /* === 5. COSMIC ORACLE STYLES (PRESERVED/MODIFIED) === */
        /* ================================================= */
        
        /* Main Container - MODIFIED: Increased padding-top */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Align content to top */
            padding: 20px;
            padding-top: 150px; /* INCREASED from 100px to 150px */
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 100%;
            transition: padding-top 0.5s ease;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
            width: 100%;
            padding: 0 20px;
            transition: all 0.5s ease;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* New class for hidden header */
        header.hidden {
            position: relative; /* Changed to relative/static to flow with content */
            opacity: 0;
            transform: translateY(-100%);
            pointer-events: none;
            margin-bottom: 0;
            height: 0;
            overflow: hidden;
        }

        h1 {
            font-size: clamp(2.2rem, 7vw, 4rem); 
            margin-bottom: 15px;
            background: linear-gradient(90deg, #8b5cf6, #3b82f6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(139, 92, 246, 0.5);
            line-height: 1.2;
        }
        
        /* FIX: Ensure emoji keeps its native color */
        .emoji-fix {
            -webkit-text-fill-color: initial;
            color: inherit;
        }

        .subtitle {
            font-size: clamp(1.1rem, 3vw, 1.4rem); 
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 1px;
        }

        /* DOB Form */
        .dob-form {
            width: 100%;
            max-width: 550px; /* Base max width */
            margin: 0 auto 40px;
            padding: 30px; 
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            text-align: center;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .dob-form.hidden {
            display: none;
        }

        .form-group {
            margin-bottom: 25px; 
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px; 
            font-size: clamp(1.2rem, 2.5vw, 1.3rem); 
            color: rgba(255, 255, 255, 0.9);
        }

        /* Custom Date Input Container */
        .custom-date-input {
            position: relative;
            width: 100%;
        }

        .date-input-field {
            width: 100%;
            padding: 15px 50px 15px 20px; 
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: clamp(1.1rem, 2.5vw, 1.2rem); 
            transition: all 0.3s ease;
        }

        .date-input-field:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.3);
        }

        .date-input-field::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        /* UPDATED: Calendar Icon Styling for Font Awesome */
        .calendar-icon {
            position: absolute;
            right: 20px; 
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: clamp(1.2rem, 2.5vw, 1.4rem); 
            transition: color 0.3s ease;
        }

        .calendar-icon:hover {
            color: #8b5cf6;
        }

        /* Hidden native date input for calendar functionality */
        .hidden-date-input {
            position: absolute;
            left: -9999px;
            opacity: 0;
        }

        .submit-btn {
            width: 100%;
            padding: 15px 40px; 
            background: linear-gradient(45deg, #8b5cf6, #3b82f6);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: clamp(1.2rem, 2.5vw, 1.3rem); 
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.6);
        }

        /* User Info Display */
        .user-info {
            display: none;
            width: 100%;
            max-width: 550px; 
            margin: 25px auto;
            padding: 20px 30px; 
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            /* REMOVED SCROLLING LOGIC */
            max-height: none; 
            overflow-y: visible;
            padding-bottom: 20px;
            scrollbar-width: none;
        }
        
        /* == START: RESPONSIVE REFINEMENT FOR MAIN CONTENT WIDTH (Made Larger) == */
        @media (min-width: 768px) {
            .dob-form,
            .user-info,
            .error-message {
                /* Increased substantially for tablet/half-desktop to reduce empty background area */
                max-width: 90%; 
                min-width: 700px; /* Ensure a minimum wide look */
                padding: 30px 40px; /* Adjust padding for better look on larger screens */
            }
        }
        
        @media (min-width: 1024px) {
            .dob-form,
            .user-info,
            .error-message {
                /* Increased substantially for desktop */
                max-width: 90%;
                min-width: 950px; /* Ensure a wide look on standard desktops */
            }
        }
        /* == END: RESPONSIVE REFINEMENT FOR MAIN CONTENT WIDTH (Made Larger) == */


        .user-info.visible {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .zodiac-sign {
            display: inline-block;
            margin: 0 10px;
            font-size: clamp(1.5rem, 3.5vw, 1.8rem); 
        }

        .user-details {
            margin-top: 15px;
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
            color: rgba(255, 255, 255, 0.7);
        }

        /* Updated Cosmic Stats - Single Horizontal Line */
        .cosmic-stats {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            padding: 15px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-wrap: nowrap; /* Prevent wrapping */
            overflow-x: auto; /* Allow horizontal scroll on very small screens */
        }

        .stat-item {
            text-align: center;
            flex: 1;
            padding: 0 5px; 
            position: relative;
            min-width: 0; 
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 50px; 
        }

        .stat-item:not(:last-child)::after {
            content: "";
            position: absolute;
            right: 0;
            top: 0; 
            height: 100%; 
            width: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        .stat-value {
            font-size: clamp(0.9rem, 2.5vw, 1.1rem); 
            font-weight: bold;
            color: #8b5cf6;
            margin-bottom: 5px;
            white-space: nowrap; 
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 0;
        }

        .stat-label {
            font-size: clamp(0.7rem, 2vw, 0.8rem); 
            color: rgba(255, 255, 255, 0.5);
            white-space: nowrap; 
            margin-top: auto; 
            flex-grow: 0;
        }

        /* Fix for birth moon phase display */
        #moonPhaseValue {
            white-space: normal !important; 
            line-height: 1.2;
            height: 2.4em; 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Footer - MODIFIED: Changed position to relative to flow with content */
        footer {
            position: relative;
            bottom: auto;
            margin-top: 40px; /* Add margin to separate from content */
            left: 0;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
            padding: 0 20px 20px; /* Added bottom padding */
        }

        /* Advanced UI Elements */
        .prediction-category {
            display: inline-block;
            padding: 8px 18px; 
            background: rgba(139, 92, 246, 0.2);
            border-radius: 20px;
            font-size: clamp(0.9rem, 2vw, 1rem); 
            margin-right: 12px;
            margin-bottom: 12px;
        }

        .history-item {
            padding: 12px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
            line-height: 1.5; 
        }

        .history-date {
            font-size: clamp(0.9rem, 2vw, 1rem); 
            color: rgba(255, 255, 255, 0.5);
        }

        /* Reset button */
        .reset-btn {
            display: none;
            width: 100%;
            max-width: 220px; 
            margin: 15px auto;
            padding: 10px 25px; 
            background: rgba(255, 59, 59, 0.3);
            border: 1px solid rgba(255, 59, 59, 0.5);
            border-radius: 50px;
            color: white;
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-btn.visible {
            display: block;
        }

        .reset-btn:hover {
            background: rgba(255, 59, 59, 0.5);
            transform: translateY(-2px);
        }

        /* Cosmic Insights */
        .cosmic-insights {
            margin-top: 20px;
            padding: 20px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .insight-title {
            font-size: clamp(1.1rem, 2.5vw, 1.2rem); 
            margin-bottom: 12px;
            color: #8b5cf6;
        }

        .insight-text {
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.8);
        }

        /* --- MODIFIED MUSIC TOGGLE STYLING --- */
        .music-toggle {
            position: fixed; /* Retain fixed position */
            top: 30px; 
            right: 30px; 
            transform: none; 
            width: 50px; 
            height: 50px; 
            cursor: pointer;
            z-index: 50; 
            opacity: 1; /* Always visible */
            transition: opacity 0.3s ease, transform 0.3s ease;
            
            /* REMOVED: glass effect, border, and background */
            background: transparent;
            border: none;
            backdrop-filter: none;
            box-shadow: none;
            border-radius: 0;
            display: flex; /* Ensure the image is centered if the container were larger */
            align-items: center;
            justify-content: center;
        }
        
        .music-toggle:hover {
            opacity: 0.8; /* Subtle hover effect */
            transform: scale(1.05); /* Subtle scale effect */
        }

        .music-toggle img {
            width: 100%; /* Image fills the container */
            height: 100%;
            object-fit: contain;
        }

        /* Responsive Music Toggle Position & Size */
        @media (min-width: 1024px) {
            .music-toggle {
                width: 50px;
                height: 50px;
                top: 30px;
                right: 30px;
            }
        }
        
        @media (max-width: 767px) {
            .music-toggle {
                right: 15px;
                top: 15px;
                width: 45px;
                height: 45px;
            }
        }
        /* --- END MODIFIED MUSIC TOGGLE STYLING --- */

        /* Error Message */
        .error-message {
            display: none;
            width: 100%;
            max-width: 550px; 
            margin: 25px auto;
            padding: 20px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            color: #ef4444;
            text-align: center;
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
        }

        .error-message.visible {
            display: block;
        }

        /* Date validation styles */
        .date-input-field.invalid {
            border-color: rgba(239, 68, 68, 0.5);
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
        }

        .date-error {
            color: rgba(239, 68, 68, 0.8);
            font-size: clamp(0.9rem, 2vw, 1rem); 
            margin-top: 8px;
            display: none;
        }

        .date-error.visible {
            display: block;
        }

        /* Date format hint */
        .date-hint {
            font-size: clamp(0.9rem, 2vw, 1rem); 
            color: rgba(255, 255, 255, 0.5);
            margin-top: 8px;
            text-align: left;
        }

        /* New styles for zodiac details */
        .zodiac-details {
            margin-top: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .zodiac-details-title {
            font-size: clamp(1.2rem, 3vw, 1.3rem); 
            margin-bottom: 18px;
            color: #8b5cf6;
            text-align: center;
        }

        .zodiac-detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            flex-wrap: wrap;
        }

        .zodiac-detail-label {
            font-weight: 600;
            color: rgba(255, 255, 255, 0.7);
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
        }

        .zodiac-detail-value {
            color: rgba(255, 255, 255, 0.9);
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
        }

        .tarot-cards {
            margin-top: 20px;
            text-align: center;
        }

        .tarot-card {
            display: inline-block;
            padding: 8px 18px; 
            background: rgba(139, 92, 246, 0.15);
            border-radius: 15px;
            font-size: clamp(0.9rem, 2.2vw, 1rem); 
            color: rgba(255, 255, 255, 0.9);
            margin: 8px; /* Added margin for spacing */
        }

        .decans-container {
            margin-top: 20px;
        }

        .decan {
            margin-bottom: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            font-size: clamp(1rem, 2.5vw, 1.1rem); 
        }

        .decan-date {
            font-weight: 600;
            color: rgba(139, 92, 246, 0.9);
            margin-bottom: 8px;
        }

        .decan-card {
            color: rgba(255, 255, 255, 0.8);
        }

        /* Zodiactivities Section */
        .zodiactivities-container {
            margin-top: 25px;
            padding: 20px;
            background: rgba(139, 92, 246, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(139, 92, 246, 0.1);
        }

        .zodiactivities-title {
            font-size: clamp(1.1rem, 2.5vw, 1.2rem); 
            margin-bottom: 12px;
            color: #8b5cf6;
            text-align: center;
        }

        .zodiactivities-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        .zodiactivity-item {
            padding: 8px 15px; 
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            font-size: clamp(0.9rem, 2.2vw, 1rem); 
            color: rgba(255, 255, 255, 0.8);
            transition: all 0.2s ease;
        }

        .zodiactivity-item:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateY(-2px);
        }

        /* Tabs for zodiac information - ENHANCED STYLING */
        .zodiac-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 12px;
            position: relative;
        }

        .zodiac-tab {
            position: relative;
            padding: 12px 24px; 
            margin: 0;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(59, 130, 246, 0.15));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 50px; 
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            z-index: 1;
        }

        /* Add a subtle glow effect */
        .zodiac-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .zodiac-tab:hover::before {
            opacity: 1;
        }

        .zodiac-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(139, 92, 246, 0.4);
            color: #fff;
            border-color: rgba(139, 92, 246, 0.6);
        }

        .zodiac-tab.active {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.4), rgba(59, 130, 246, 0.4));
            border-color: rgba(139, 92, 246, 0.8);
            color: #fff;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.6);
            transform: scale(1.05);
        }

        /* Add a subtle animation to the active tab */
        .zodiac-tab.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 2s infinite;
            z-index: -1;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        
        /* === NEW BOUNCE ANIMATION FOR INACTIVE TABS === */
        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            20% { transform: translateY(-3px) scale(1.02); }
            40% { transform: translateY(0) scale(1); }
            60% { transform: translateY(-1px) scale(1.01); }
            80% { transform: translateY(0) scale(1); }
        }
        
        /* The 'bouncing' class will be added and removed by JS for the effect */
        .zodiac-tab.bouncing {
            animation: bounce 0.6s ease-out 1;
        }
        /* ============================================== */

        .zodiac-tab-content {
            display: none;
        }

        .zodiac-tab-content.active {
            display: block;
        }

        /* New styles for character traits */
        .character-traits {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
        }

        .traits-title {
            font-size: clamp(1.1rem, 2.5vw, 1.2rem);
            margin-bottom: 12px;
            color: #8b5cf6;
            text-align: center;
        }

        .traits-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        .trait-item {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            font-size: clamp(0.9rem, 2.2vw, 1rem);
            color: rgba(255, 255, 255, 0.8);
            transition: all 0.2s ease;
        }

        .trait-item:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateY(-2px);
        }

        /* New styles for luck information */
        .luck-info {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 215, 0, 0.1);
        }

        .luck-title {
            font-size: clamp(1.1rem, 2.5vw, 1.2rem);
            margin-bottom: 12px;
            color: #ffd700;
            text-align: center;
        }

        .luck-items {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 12px;
        }

        .luck-item {
            flex-basis: calc(50% - 6px);
            padding: 10px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 10px;
            font-size: clamp(0.9rem, 2.2vw, 1rem);
        }

        .luck-label {
            font-weight: 600;
            color: rgba(255, 215, 0, 0.8);
            margin-bottom: 5px;
        }

        .luck-value {
            color: rgba(255, 255, 255, 0.8);
        }

        /* New styles for tarot card images */
        .tarot-card-images {
            margin-top: 25px;
            text-align: center;
        }

        /* MODIFIED: Clearer Title for Tarot Interaction */
        .tarot-card-images-title {
            font-size: clamp(1.1rem, 2.5vw, 1.2rem);
            margin-bottom: 18px;
            color: #8b5cf6;
            text-align: center;
            font-weight: bold; 
        }

        /* Loading text style */
        .loading-text {
            color: rgba(255, 255, 255, 0.5);
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            padding: 50px 0;
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tarot-card-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 18px;
            margin-bottom: 18px;
            min-height: 230px;
        }

        /* === NEW TAROT CARD FLIP STYLES === */
        .tarot-card-wrapper {
            perspective: 1000px;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 140px;
            height: 230px;
        }

        .tarot-card-wrapper:hover {
            transform: translateY(-5px);
        }

        .tarot-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        /* Front and Back of the card */
        .tarot-card-front, .tarot-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tarot-card-front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        /* MODIFIED: Back text for clarity */
        .tarot-card-back {
            background: linear-gradient(135deg, #1a0033, #0a0e27);
            color: white;
            transform: rotateY(180deg);
            padding: 10px;
            font-size: 14px;
            line-height: 1.3;
            border: 2px solid #8b5cf6;
            text-align: center;
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
        }
        
        /* Added specific styles for text on back of card for clarity */
        .tarot-card-back p {
            margin: 0;
            padding: 0;
        }

        .tarot-card-back p:first-child {
            font-size: clamp(1.2rem, 3.5vw, 1.5rem);
            color: #ffd700;
            margin-bottom: 8px !important;
            font-weight: bold;
        }

        .tarot-card-back p:last-child {
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            font-weight: 500;
        }

        .tarot-card-name {
            margin-top: 8px;
            font-size: clamp(0.9rem, 2.2vw, 1rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
        }
        
        .tarot-card-inner.flipped {
            transform: rotateY(180deg);
        }
        
        /* END NEW TAROT CARD FLIP STYLES */

        .refresh-cards-btn {
            margin-top: 12px;
            padding: 10px 25px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 20px;
            color: white;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .refresh-cards-btn:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: translateY(-2px);
        }

        /* Future Reveal Section - Now inside a tab */
        .future-reveal {
            width: 100%;
            max-width: 650px;
            margin: 0 auto;
            padding: 35px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            display: none;
        }

        .future-reveal.visible {
            display: block;
        }

        .future-reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* == START: RESPONSIVE REFINEMENT FOR PREDICTIONS WIDTH (Made Larger) == */
        @media (min-width: 768px) {
            .future-reveal {
                max-width: 90%;
                min-width: 700px;
                padding: 30px 40px;
            }
        }
        
        @media (min-width: 1024px) {
            .future-reveal {
                max-width: 90%;
                min-width: 950px;
            }
        }
        /* == END: RESPONSIVE REFINEMENT FOR PREDICTIONS WIDTH (Made Larger) == */

        .future-text {
            font-size: clamp(1.2rem, 3vw, 1.4rem);
            line-height: 1.6;
            text-align: center;
            margin-bottom: 25px;
        }

        .future-date {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: clamp(1rem, 2.5vw, 1.1rem);
        }
        
        /* NEW: Past Life Insights Container - Non-scrollable */
        .past-life-insights-container {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
        }

        /* New style for past life predictions */
        .past-life-title {
            font-size: clamp(1.3rem, 3.5vw, 1.5rem);
            color: #8b5cf6;
            text-align: center;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .past-life-icon {
            margin-right: 10px;
            font-size: clamp(1.5rem, 4vw, 1.8rem);
        }

        /* --- NEW MODAL STYLES FOR CARD DETAILS --- */
        .modal-overlay {
            display: none;
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; 
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: rgba(10, 14, 39, 0.95);
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 5px 30px rgba(139, 92, 246, 0.5);
            position: relative; 
            animation: slideIn 0.5s ease-out;
            border: 2px solid #8b5cf6;
            max-height: 90vh;
            overflow-y: auto; 
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Applying the unified style to the Tarot Card Close Button */
        .close-btn {
            /* Now uses the universal style */
            position: absolute; 
            top: 15px; 
            right: 25px; 
            color: var(--color-error); /* Set to red */
            font-size: 32px; 
            font-weight: 700;
            cursor: pointer; 
            transition: transform 0.3s ease, color 0.3s, background 0.3s;
            z-index: 10; 
            opacity: 1; 
            background: none;
            border: none;
            width: 40px; 
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: var(--text-white); 
            background: rgba(255, 59, 59, 0.3);
            text-decoration: none;
            cursor: pointer;
            transform: rotate(90deg);
        }

        .modal-header {
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: clamp(1.5rem, 4vw, 2rem);
            color: #8b5cf6;
            padding-left: 0px; 
            padding-right: 30px; 
        }

        .modal-body {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .modal-card-image {
            width: 180px;
            height: 290px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin: 0 auto 20px;
            object-fit: cover;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-card-info {
             padding-top: 10px;
        }

        .modal-section-title {
            font-size: clamp(1.2rem, 3vw, 1.4rem);
            color: #3b82f6;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            padding-bottom: 5px;
            margin-bottom: 10px;
        }

        .modal-description {
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .meaning-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .meaning-item {
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 5px solid;
        }
        
        .meaning-item.upright {
            border-color: #ffd700;
        }
        
        .meaning-item.reversed {
            border-color: #ef4444;
        }

        @media (min-width: 600px) {
            .modal-body {
                flex-direction: row;
                gap: 30px;
            }
            .modal-card-info {
                flex: 1;
            }
            .meaning-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        /* --- END NEW MODAL STYLES --- */


        /* Responsive Design - Mobile First Approach */
        @media (max-width: 1200px) {
            .container {
                padding: 20px;
                padding-top: 150px;
            }
        }

        @media (max-width: 992px) {
            .container {
                padding: 18px;
                padding-top: 150px;
            }
            
            .future-reveal {
                margin: 25px auto;
                padding: 25px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
                padding-top: 120px; /* Adjusted to 120px */
            }
            
            header {
                margin-bottom: 25px;
            }
            
            .dob-form {
                padding: 25px;
                margin-bottom: 25px;
            }
            
            .future-reveal {
                margin: 25px auto;
                padding: 25px;
            }
            
            .zodiac-detail-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .zodiac-detail-label {
                margin-bottom: 8px;
            }
            
            .tarot-card-wrapper {
                width: 120px;
                height: 190px;
            }

            .modal-content {
                padding: 20px;
                width: 95%;
            }

            .meaning-grid {
                grid-template-columns: 1fr;
            }
            
            /* Adjust tab buttons for smaller screens */
            .zodiac-tab {
                padding: 10px 18px;
                font-size: clamp(0.9rem, 2.5vw, 1rem);
            }

             /* MODIFIED: Back text for clarity on mobile */
            .tarot-card-back p:first-child {
                font-size: 1.2rem !important;
            }

            .tarot-card-back p:last-child {
                font-size: 0.9rem !important;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 12px;
                padding-top: 120px; /* Adjusted to 120px */
            }
            
            header {
                margin-bottom: 25px;
            }
            
            .dob-form {
                padding: 25px;
                margin-bottom: 25px;
            }
            
            .future-reveal {
                margin: 25px auto;
                padding: 25px;
            }
            
            /* Keep cosmic stats on one line even on small screens */
            .cosmic-stats {
                flex-wrap: nowrap;
                overflow-x: auto;
                padding: 15px 5px;
            }
            
            .stat-item {
                padding: 0 3px; 
                min-width: 0;
            }
            
            .stat-value {
                font-size: clamp(0.8rem, 3vw, 0.9rem);
            }
            
            .stat-label {
                font-size: clamp(0.6rem, 2.5vw, 0.7rem);
            }
            
            .zodiac-tabs {
                gap: 8px;
            }
            
            /* Further adjust tab buttons for very small screens */
            .zodiac-tab {
                padding: 8px 14px;
                font-size: clamp(0.9rem, 2.5vw, 1rem);
            }
            
            .zodiac-details {
                padding: 18px;
            }
            
            .zodiactivities-container {
                padding: 15px;
            }
            
            .zodiac-detail-row {
                flex-direction: column;
                align-items: flex-start;
                padding-bottom: 10px;
            }
            
            .decan {
                padding: 10px;
            }
            
            .tarot-card-wrapper {
                width: 120px;
                height: 190px;
            }

            .modal-content {
                padding: 20px;
                width: 95%;
            }
            
            .luck-item {
                flex-basis: 100%;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
                padding-top: 90px; /* Adjusted to 90px */
            }
            
            header {
                margin-bottom: 15px;
            }
            
            .dob-form {
                padding: 18px;
                margin-bottom: 15px;
            }
            
            .future-reveal {
                margin: 15px auto;
                padding: 18px;
            }
            
            /* Ensure cosmic stats stay on one line */
            .cosmic-stats {
                flex-wrap: nowrap;
                overflow-x: auto;
                padding: 15px 2px;
            }
            
            .stat-item {
                padding: 0 3px;
                min-width: 0;
            }
            
            .stat-value {
                font-size: clamp(0.7rem, 3.5vw, 0.8rem);
            }
            
            .stat-label {
                font-size: clamp(0.5rem, 3vw, 0.6rem);
            }
            
            .zodiac-tabs {
                gap: 6px;
            }
            
            /* Final adjustment for tab buttons on very small screens */
            .zodiac-tab {
                padding: 6px 12px;
                font-size: clamp(0.7rem, 3.5vw, 0.8rem);
            }
            
            .zodiac-details {
                padding: 15px;
            }
            
            .zodiactivities-container {
                padding: 12px;
            }
            
            .decan {
                padding: 10px;
            }
            
            .tarot-card-wrapper {
                width: 90px;
                height: 140px;
            }
        }

        /* Landscape orientation adjustments */
        @media (max-height: 600px) and (orientation: landscape) {
            .container {
                min-height: auto;
                padding-top: 15px;
                padding-bottom: 15px;
                overflow-y: visible; /* Let body handle the scroll */
            }
            
            header {
                margin-bottom: 20px;
            }
            
            .dob-form {
                margin-bottom: 20px;
            }
            
            .future-reveal {
                margin: 20px auto;
            }
            
            footer {
                position: relative;
                bottom: auto;
                margin-top: 20px;
            }
        }

        /* Ultra-wide screens: Maximize content area while retaining readability */
        @media (min-width: 1400px) {
            .container {
                max-width: 1800px; 
                margin: 0 auto;
            }
            .dob-form,
            .user-info,
            .future-reveal,
            .error-message {
                max-width: 1500px; 
            }
        }

        /* Music notification styles */
        .music-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(139, 92, 246, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 14px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .music-notification.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    
    <div class="universe"><div class="stars"></div></div>
    
    <button id="menu-trigger"><i class="fas fa-bars"></i></button>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="avatar-wrapper" id="menu-avatar-wrapper">
                <img src="avatar.png" class="avatar-img" id="menu-avatar" style="display:none;">
                <div class="avatar-initials" id="menu-initials" style="display:none;"></div>
            </div>
            <div class="close-sidebar" id="close-sidebar">&times;</div>
            <h3>Shyam Bodhak</h3>
        </div>

        <div class="nav-list">
            <a href="#" class="nav-item" id="close-home-reset"><i class="fas fa-home"></i> Home</a> 
            <a href="#" class="nav-item" id="open-identity"><i class="fas fa-id-card"></i> Identity</a>
            <a href="#" class="nav-item" id="open-about"><i class="fas fa-info-circle"></i> About</a>
        </div>

        <div class="menu-footer"><p style="font-size: 12px; color: #666;"> 2025 Shyam Bodhak</p></div>
    </div>
    
    <div class="modal-backdrop" id="identity-modal">
        <div class="profile-card">
            <button class="close-btn-style" id="close-modal">&times;</button>
            
            <div class="avatar-wrapper" id="modal-avatar-wrapper" style="width:120px; height:120px;">
                <img src="avatar.png" class="avatar-img" id="modal-avatar" style="display:none;">
                <div class="avatar-initials" id="modal-initials" style="font-size: 42px; display:none;"></div>
            </div>

            <h2 class="card-name">Shyam Bodhak</h2>
            <p class="card-handle">@SKBodhak</p>

            <div class="bio-container">
                <div class="bio-label">About / Quote</div>
                <div class="bio-box">
                    <i class="fas fa-quote-right"></i>
                    "When love becomes a tradition, then another new era will begin."<br><br>- GOD OF NONE
                </div>
            </div>

            <a href="https://www.buymeacoffee.com/SKBodhak" target="_blank" class="bmc-btn">
                <i class="fas fa-coffee"></i> Buy me a coffee
            </a>

            <div class="social-grid">
                <a href="https://instagram.com/SKBodhak" target="_blank" class="social-icon" title="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://signal.me/#eu/lFDsDKg1CRchNKmnngX5MhTtWFWp3vzu3g-jm1c4ZirChc7V5_NBZ5bhlANt_P4r" target="_blank" class="social-icon" title="Signal">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6-.097 1.016-.417 2.13-.771 2.966-.079.186.074.394.273.362 2.256-.37 3.597-.938 4.18-1.234A9.06 9.06 0 0 0 8 15z"/></svg>
                </a>
            </div>
        </div>
    </div>

    <div class="about-overlay" id="about-overlay">
        <button class="close-btn-style" id="close-about" style="color: inherit;">&times;</button>
        <div class="about-container" id="about-container">
            <h1 class="about-title" id="about-title"></h1>
            <div class="about-content" id="about-content"></div>
        </div>
    </div>

    <div class="image-viewer" id="image-viewer">
        <div class="image-protection-layer" id="viewer-close-trigger"></div>
        <img src="" id="full-image" draggable="false">
        <div class="viewer-fallback" id="viewer-fallback">
            <div class="fallback-circle" id="fallback-initials">SB</div>
            <div class="fallback-name">Shyam Bodhak</div>
            <div class="fallback-title">Identity Profile</div>
        </div>
    </div>
    
    <div class="starfield" id="starfield"></div>
    <div class="particles" id="particles"></div>

    <audio id="backgroundMusic">
        Your browser does not support the audio element.
    </audio>

    <div class="music-toggle" id="musicToggle">
        <img src="on.png" alt="Music On" id="musicIcon">
    </div>

    <div class="music-notification" id="musicNotification">
        Click anywhere to enable background music
    </div>

    <div class="container" id="mainContainer">
        <header id="mainHeader">
            <h1>Cosmic Oracle <span class="emoji-fix"></span></h1>
            <p class="subtitle">Gaze into the future and discover what awaits</p>
        </header>

        <main>
            <div class="dob-form" id="dobForm">
                <h2 style="margin-bottom: 25px; font-size: clamp(1.4rem, 3.5vw, 1.6rem);">Enter Your Birth Date</h2>
                <div class="form-group">
                    <label for="dobInput">Date of Birth</label>
                    <div class="custom-date-input">
                        <input type="text" class="date-input-field" id="dobInput" placeholder="DD/MM/YYYY" autocomplete="off">
                        <span class="calendar-icon" id="calendarIcon"><i class="fas fa-calendar-alt"></i></span>
                        <input type="date" class="hidden-date-input" id="hiddenDateInput" min="1800-01-01">
                    </div>
                    <div class="date-hint">Type as DDMMYYYY or DD/MM/YYYY</div>
                    <div class="date-error" id="dateError">Please enter a valid date in DD/MM/YYYY format</div>
                </div>
                <button class="submit-btn" id="submitDob">Reveal My Cosmic Path</button>
            </div>

            <div class="user-info" id="userInfo">
                <div class="zodiac-sign" id="zodiacSign"></div>
                <div class="user-details" id="userDetails"></div>
                <div class="cosmic-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="ageValue">-</div>
                        <div class="stat-label">Years</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="daysValue">-</div>
                        <div class="stat-label">Days</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="birthDayValue">-</div>
                        <div class="stat-label">Birth Day</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="moonPhaseValue">-</div>
                        <div class="stat-label">Birth Moon</div>
                    </div>
                </div>
                
                <div class="zodiac-tabs">
                    <div class="zodiac-tab active" data-tab="essence">Essence</div>
                    <div class="zodiac-tab" data-tab="details">Details</div>
                    <div class="zodiac-tab" data-tab="character">Character</div>
                    <div class="zodiac-tab" data-tab="luck">Luck</div>
                    <div class="zodiac-tab" data-tab="tarot">Tarot</div>
                    <div class="zodiac-tab" data-tab="activities">Activities</div>
                    <div class="zodiac-tab" data-tab="predictions">Predictions</div>
                </div>
                
                <div class="zodiac-tab-content active" id="essence-tab">
                    <div class="cosmic-insights">
                        <div class="insight-title">Your Cosmic Essence</div>
                        <div class="insight-text" id="cosmicEssence"></div>
                    </div>
                </div>
                
                <div class="zodiac-tab-content" id="details-tab">
                    <div class="zodiac-details">
                        <div class="zodiac-details-title">Zodiac Profile</div>
                        <div class="zodiac-detail-row">
                            <span class="zodiac-detail-label">Motto:</span>
                            <span class="zodiac-detail-value" id="zodiacMotto"></span>
                        </div>
                        <div class="zodiac-detail-row">
                            <span class="zodiac-detail-label">House:</span>
                            <span class="zodiac-detail-value" id="zodiacHouse"></span>
                        </div>
                        <div class="zodiac-detail-row">
                            <span class="zodiac-detail-label">Ruler:</span>
                            <span class="zodiac-detail-value" id="zodiacRuler"></span>
                        </div>
                        <div class="zodiac-detail-row">
                            <span class="zodiac-detail-label">Element:</span>
                            <span class="zodiac-detail-value" id="zodiacElement"></span>
                        </div>
                        <div class="zodiac-detail-row">
                            <span class="zodiac-detail-label">Associated Number:</span>
                            <span class="zodiac-detail-value" id="zodiacNumber"></span>
                        </div>
                        <div class="zodiac-detail-row">
                            <span class="zodiac-detail-label">Life Path:</span>
                            <span class="zodiac-detail-value" id="lifePathNumber"></span>
                        </div>
                    </div>
                </div>
                
                <div class="zodiac-tab-content" id="character-tab">
                    <div class="character-traits">
                        <div class="traits-title">Character Traits</div>
                        <div class="traits-list" id="traitsList"></div>
                    </div>
                </div>
                
                <div class="zodiac-tab-content" id="luck-tab">
                    <div class="luck-info">
                        <div class="luck-title">Your Lucky Elements</div>
                        <div class="luck-items" id="luckItems"></div>
                    </div>
                </div>
                
                <div class="zodiac-tab-content" id="tarot-tab">
                    
                    <div class="tarot-card-images">
                        <div class="tarot-card-images-title">Your Tarot Reading: Click/Tap a Card to Reveal Details</div>
                        <div class="tarot-card-container" id="tarotCardContainer">
                            <div class="loading-text" id="tarotLoadingText">Drawing Cards...</div>
                            </div>
                        <button class="refresh-cards-btn" id="refreshCardsBtn">Draw New Cards</button>
                    </div>
                    <div class="zodiac-details">
                        <div class="zodiac-details-title">Tarot Connections</div>
                        <div class="tarot-cards" id="tarotCards"></div>
                        <div class="decans-container">
                            <div class="zodiac-details-title">Decans</div>
                            <div id="decansList"></div>
                        </div>
                    </div>
                </div>
                
                <div class="zodiac-tab-content" id="activities-tab">
                    <div class="zodiactivities-container">
                        <div class="zodiactivities-title">Your Zodiactivities</div>
                        <div class="zodiactivities-list" id="zodiactivitiesList"></div>
                    </div>
                </div>
                
                <div class="zodiac-tab-content" id="predictions-tab">
                    <div class="future-reveal" id="futureReveal">
                        <div id="predictionCategories"></div>
                        <p class="future-text" id="futureText"></p>
                        <p class="future-date" id="futureDate"></p>
                        
                        <div class="past-life-insights-container">
                            <div class="past-life-title">
                                <span class="past-life-icon"></span>
                                <span>Past Life Insights</span>
                            </div>
                            <div id="pastLifeList"></div> </div>
                    </div>
                </div>
                
                <button class="reset-btn" id="resetBtn">Change Birth Date</button>
            </div>

            <div class="error-message" id="errorMessage">
                <p>An unexpected fluctuation in cosmic data stream has occurred.</p>
            </div>
        </main>

        <footer>
            <p>The cosmos whispers secrets to those who listen. </p>
        </footer>
    </div>
    
    <div id="cardDetailsModal" class="modal-overlay">
        <span class="close-btn" id="closeModalBtn"><i class="fas fa-times"></i></span>
        <div class="modal-content" id="modalContent">
            <div class="modal-header">
                <h3 id="modalCardName"></h3>
            </div>
            <div class="modal-body">
                <div class="modal-card-image-container">
                    <img id="modalCardImage" src="" alt="" class="modal-card-image">
                </div>
                <div class="modal-card-info">
                    <div class="modal-description" id="modalCardDescription"></div>
                    <div class="meaning-grid">
                        <div class="meaning-item upright">
                            <div class="modal-section-title"> Upright Meaning</div>
                            <div id="modalCardUpright"></div>
                        </div>
                        <div class="meaning-item reversed">
                            <div class="modal-section-title"> Reversed Meaning</div>
                            <div id="modalCardReversed"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8L8LLC2QKV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8L8LLC2QKV');
</script>
    <script>
        // --- Setup and Animations (Unchanged) ---
        function createStarfield() {
            const starfield = document.getElementById('starfield');
            const starCount = window.innerWidth < 768 ? 100 : 200;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                const size = Math.random() * 2 + 0.5;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                star.style.animationDelay = Math.random() * 3 + 's';
                starfield.appendChild(star);
            }
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = window.innerWidth < 768 ? 50 : 100;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 20 + 10) + 's';
                particle.style.animationDelay = Math.random() * 20 + 's';
                const size = Math.random() * 3 + 1;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particlesContainer.appendChild(particle);
            }
        }

        // --- Core Cosmic Data (CORRECTED ZODIAC ACTIVITIES) ---
        const zodiacSigns = [
            {
                name: "Aries", 
                symbol: "", 
                motto: "I AM",
                startMonth: 3, 
                startDay: 20, 
                endMonth: 4, 
                endDay: 20, 
                element: "Fire", 
                ruler: "Mars", 
                house: "1st House",
                numbers: [8],
                essence: "Pioneering spirit with natural leadership qualities and boundless energy",
                tarotCards: {
                    sign: "The Emperor",
                    ruler: "The Tower"
                },
                decans: [
                    { dateRange: "March 20-30", card: "2 of Wands", degrees: "0-9.59" },
                    { dateRange: "March 31-April 10", card: "3 of Wands", degrees: "10-19.59" },
                    { dateRange: "April 11-20", card: "4 of Wands", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Courageous", "Determined", "Confident", "Enthusiastic", 
                    "Optimistic", "Honest", "Passionate", "Independent", 
                    "Impulsive", "Short-tempered", "Impatient", "Aggressive"
                ],
                luckyElements: {
                    colors: ["Red", "Orange", "Yellow"],
                    numbers: [1, 8, 17],
                    days: ["Tuesday", "Sunday"],
                    stones: ["Diamond", "Ruby", "Garnet"],
                    metals: ["Iron", "Steel"],
                    flowers: ["Tulip", "Honeysuckle", "Thistle"],
                    foods: ["Hot peppers", "Spicy dishes", "Red meat"],
                    directions: ["East", "South"],
                    animals: ["Ram", "Eagle", "Tiger"],
                    scents: ["Cinnamon", "Clove", "Ginger"],
                    crystals: ["Carnelian", "Red Jasper", "Bloodstone"],
                    places: ["Deserts", "Volcanoes", "Mountains"],
                    activities: ["Mountain climbing", "Martial arts", "Competitive sports"]
                },
                zodiactivities: [
                    "Write a story about yourself that begins, 'I AM...'",
                    "Polish your metal objects",
                    "Start your day by watching the sunrise",
                    "Make eye contact",
                    "Fight a fire under something that has gone cold",
                    "Paint a self-portrait",
                    "Settle a feud",
                    "Have your eyes examined",
                    "Dance",
                    "Go to battle for the things you believe in",
                    "Have a facial",
                    "Buy cutlery"
                ],
                pastLife: [
                    "In a past life, you were a warrior leader who inspired others with courage",
                    "Your soul carries the memory of ancient battles fought for noble causes",
                    "You once stood at the forefront of new discoveries, blazing trails for others",
                    "A previous incarnation saw you as a pioneer in uncharted territories",
                    "Your soul remembers the thrill of being first to achieve greatness"
                ]
            },
            {
                name: "Taurus", 
                symbol: "", 
                motto: "I HAVE",
                startMonth: 4, 
                startDay: 20, 
                endMonth: 5, 
                endDay: 21, 
                element: "Earth", 
                ruler: "Venus", 
                house: "2nd House: Money and Possessions",
                numbers: [4, 6],
                essence: "Grounded nature with appreciation for beauty, comfort and material security",
                tarotCards: {
                    sign: "The Hierophant",
                    ruler: "The Empress"
                },
                decans: [
                    { dateRange: "April 20-30", card: "5 of Pentacles", degrees: "0-9.59" },
                    { dateRange: "May 1-10", card: "6 of Pentacles", degrees: "10-19.59" },
                    { dateRange: "May 11-21", card: "7 of Pentacles", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Reliable", "Patient", "Practical", "Devoted", 
                    "Responsible", "Stable", "Loyal", "Persistent", 
                    "Stubborn", "Possessive", "Uncompromising", "Materialistic"
                ],
                luckyElements: {
                    colors: ["Green", "Pink", "Blue"],
                    numbers: [2, 6, 9],
                    days: ["Friday", "Monday"],
                    stones: ["Emerald", "Rose Quartz", "Lapis Lazuli"],
                    metals: ["Copper", "Silver"],
                    flowers: ["Rose", "Violet", "Lily"],
                    foods: ["Comfort foods", "Dairy products", "Sweet desserts"],
                    directions: ["South", "West"],
                    animals: ["Bull", "Elephant", "Bear"],
                    scents: ["Rose", "Vanilla", "Sandalwood"],
                    crystals: ["Rose Quartz", "Emerald", "Aventurine"],
                    places: ["Gardens", "Luxury resorts", "Art galleries"],
                    activities: ["Gardening", "Cooking", "Fine dining"]
                },
                // CORRECTED to original Taurus list
                zodiactivities: [
                    "Balance your checkbook",
                    "Start a savings account",
                    "Develop a budget",
                    "Make your environment more secure",
                    "Make your environment more sensuous",
                    "Perfume yourself",
                    "Get an aromatherapy massage",
                    "Take up strength training",
                    "Sing",
                    "Take music lessons",
                    "Plant a garden",
                    "Listen"
                ],
                pastLife: [
                    "In a past life, you were a guardian of sacred temples and keeper of ancient knowledge",
                    "Your soul remembers a lifetime of creating beauty through art and music",
                    "You once served as a steward of the earth, tending to sacred gardens",
                    "A previous incarnation saw you as a master craftsman creating objects of lasting value",
                    "Your soul carries the memory of building structures that have stood for centuries"
                ]
            },
            {
                name: "Gemini", 
                symbol: "", 
                motto: "I Think",
                startMonth: 5, 
                startDay: 20, 
                endMonth: 6, 
                endDay: 20, 
                element: "Air", 
                ruler: "Mercury", 
                house: "3rd House: Communications, Early Learning, Neighborhood",
                numbers: [5],
                essence: "Curious mind with exceptional communication skills and adaptable nature",
                tarotCards: {
                    sign: "The Lovers",
                    ruler: "The Magician"
                },
                decans: [
                    { dateRange: "May 20-30", card: "8 of Swords", degrees: "0-9.59" },
                    { dateRange: "June 1-10", card: "9 of Swords", degrees: "10-19.59" },
                    { dateRange: "June 11-20", card: "10 of Swords", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Gentle", "Affectionate", "Curious", "Adaptable", 
                    "Quick learner", "Outgoing", "Intelligent", "Versatile", 
                    "Nervous", "Inconsistent", "Indecisive", "Impulsive"
                ],
                luckyElements: {
                    colors: ["Yellow", "Green", "Silver"],
                    numbers: [5, 7, 14],
                    days: ["Wednesday", "Sunday"],
                    stones: ["Agate", "Citrine", "Aventurine"],
                    metals: ["Mercury", "Aluminum"],
                    flowers: ["Lavender", "Lily of the Valley", "Azalea"],
                    foods: ["Nuts", "Seeds", "Variety of dishes"],
                    directions: ["North", "East"],
                    animals: ["Butterfly", "Parrot", "Fox"],
                    scents: ["Lavender", "Lemon", "Peppermint"],
                    crystals: ["Citrine", "Agate", "Tiger's Eye"],
                    places: ["Libraries", "Cafes", "Bookstores"],
                    activities: ["Reading", "Writing", "Social networking"]
                },
                // CORRECTED to original Gemini list
                zodiactivities: [
                    "Purchase phones, postage, gloves",
                    "Write or call old friends or siblings",
                    "Learn a new word each day",
                    "Reacquaint yourself with the neighborhood",
                    "Greet your neighbors",
                    "Get a manicure",
                    "Wear and care for your rings and bracelets",
                    "Visit the library",
                    "Take a day trip",
                    "Reread your favorite book",
                    "Take a class just for fun",
                    "Think before you speak"
                ],
                pastLife: [
                    "In a past life, you were a messenger carrying important information between kingdoms",
                    "Your soul remembers being a scholar who preserved ancient texts and knowledge",
                    "You once served as a diplomat, using words to prevent conflicts and build alliances",
                    "A previous incarnation saw you as a teacher who shared wisdom with eager students",
                    "Your soul carries the memory of being a storyteller who entertained and educated through tales"
                ]
            },
            {
                name: "Cancer", 
                symbol: "", 
                motto: "I Feel",
                startMonth: 6, 
                startDay: 20, 
                endMonth: 7, 
                endDay: 21, 
                element: "Water", 
                ruler: "The Moon", 
                house: "4th House: Home, Family, Early Childhood, Nurturing Parent, Memories",
                numbers: [2, 6],
                essence: "Nurturing soul with deep emotional intelligence and protective instincts",
                tarotCards: {
                    sign: "The Chariot",
                    ruler: "The High Priestess"
                },
                decans: [
                    { dateRange: "June 20-30", card: "Ace of Cups", degrees: "0-9.59" },
                    { dateRange: "July 1-11", card: "3 of Cups", degrees: "10-19.59" },
                    { dateRange: "July 11-22", card: "4 of Cups", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Tenacious", "Loyal", "Emotional", "Sympathetic", 
                    "Persuasive", "Intuitive", "Protective", "Sensitive", 
                    "Moody", "Pessimistic", "Suspicious", "Manipulative"
                ],
                luckyElements: {
                    colors: ["White", "Cream", "Silver"],
                    numbers: [2, 3, 15],
                    days: ["Monday", "Thursday"],
                    stones: ["Moonstone", "Pearl", "Opal"],
                    metals: ["Silver", "Platinum"],
                    flowers: ["White Rose", "Lily", "Jasmine"],
                    foods: ["Seafood", "Comfort foods", "Soups"],
                    directions: ["North", "West"],
                    animals: ["Crab", "Turtle", "Owl"],
                    scents: ["Jasmine", "Rose", "Sandalwood"],
                    crystals: ["Moonstone", "Pearl", "Opal"],
                    places: ["Beaches", "Lakes", "Homes"],
                    activities: ["Swimming", "Cooking", "Home decorating"]
                },
                zodiactivities: [
                    "Spruce up your home",
                    "Create a sacred space",
                    "Enjoy old photos and memory books",
                    "Research your family tree",
                    "Visit your childhood home, if possible",
                    "Buy new bras",
                    "Cook at home",
                    "Enjoy comfort food",
                    "Read (or write) a memoir",
                    "Cuddle",
                    "Let go of an old hurt",
                    "Get a seaweed wrap or facial"
                ],
                pastLife: [
                    "In a past life, you were a keeper of ancestral wisdom and family traditions",
                    "Your soul remembers being a healer who used natural remedies to comfort the sick",
                    "You once served as a protector of children and the vulnerable in your community",
                    "A previous incarnation saw you as a guardian of sacred waters and natural springs",
                    "Your soul carries the memory of creating safe havens for those in need"
                ]
            },
            {
                name: "Leo", 
                symbol: "", 
                motto: "I Will",
                startMonth: 7, 
                startDay: 21, 
                endMonth: 8, 
                endDay: 23, 
                element: "Fire", 
                ruler: "The Sun", 
                house: "5th House: Fun, Children, Creativity, Love Affairs",
                numbers: [1],
                essence: "Radiant personality with natural charisma and creative expression",
                tarotCards: {
                    sign: "Strength",
                    ruler: "The Sun"
                },
                decans: [
                    { dateRange: "July 21-August 1", card: "5 of Wands", degrees: "0-9.59" },
                    { dateRange: "August 2-11", card: "6 of Wands", degrees: "10-19.59" },
                    { dateRange: "August 11-22", card: "7 of Wands", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Creative", "Passionate", "Generous", "Warm-hearted", 
                    "Cheerful", "Humorous", "Leader", "Confident", 
                    "Arrogant", "Stubborn", "Self-centered", "Lazy"
                ],
                luckyElements: {
                    colors: ["Gold", "Orange", "Red"],
                    numbers: [1, 4, 10],
                    days: ["Sunday", "Tuesday"],
                    stones: ["Ruby", "Peridot", "Carnelian"],
                    metals: ["Gold", "Bronze"],
                    flowers: ["Sunflower", "Marigold", "Dahlia"],
                    foods: ["Honey", "Citrus fruits", "Gourmet meals"],
                    directions: ["East", "North"],
                    animals: ["Lion", "Peacock", "Cat"],
                    scents: ["Orange", "Frankincense", "Sandalwood"],
                    crystals: ["Sunstone", "Carnelian", "Tiger's Eye"],
                    places: ["Theaters", "Stages", "Luxury hotels"],
                    activities: ["Performing", "Partying", "Sunbathing"]
                },
                zodiactivities: [
                    "Act like a kid again",
                    "Do something fabulous to your hair",
                    "Throw a party",
                    "Pick up the check",
                    "Be generous of spirit",
                    "Go to the theatre",
                    "Work on your posture",
                    "Check your ego",
                    "Be brave, courageous",
                    "Strengthen your character",
                    "Be honest with yourself",
                    "Express joy",
                    "Create"
                ],
                pastLife: [
                    "In a past life, you were a royalty who ruled with both authority and compassion",
                    "Your soul remembers being a performer who captivated audiences with your talent",
                    "You once served as a patron of the arts, supporting creative endeavors in your community",
                    "A previous incarnation saw you as a leader who inspired others through your vision",
                    "Your soul carries the memory of bringing light and warmth to those in darkness"
                ]
            },
            {
                name: "Virgo", 
                symbol: "", 
                motto: "I Analyze",
                startMonth: 8, 
                startDay: 23, 
                endMonth: 9, 
                endDay: 21, 
                element: "Earth", 
                ruler: "Mercury", 
                house: "6th House: Work, Routine, Health",
                numbers: [5, 9],
                essence: "Analytical mind with attention to detail and service-oriented approach",
                tarotCards: {
                    sign: "The Hermit",
                    ruler: "The Magician"
                },
                decans: [
                    { dateRange: "August 23-September 2", card: "8 of Pentacles", degrees: "0-9.59" },
                    { dateRange: "September 2-11", card: "9 of Pentacles", degrees: "10-19.59" },
                    { dateRange: "September 11-21", card: "10 of Pentacles", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Loyal", "Analytical", "Kind", "Hardworking", 
                    "Practical", "Intelligent", "Shy", "Detail-oriented", 
                    "Worry", "Overly critical", "All work", "Stubborn"
                ],
                luckyElements: {
                    colors: ["Green", "Brown", "Beige"],
                    numbers: [5, 14, 23],
                    days: ["Wednesday", "Friday"],
                    stones: ["Sapphire", "Jasper", "Carnelian"],
                    metals: ["Mercury", "Nickel"],
                    flowers: ["Aster", "Chrysanthemum", "Morning Glory"],
                    foods: ["Herbal teas", "Whole grains", "Fresh vegetables"],
                    directions: ["West", "South"],
                    animals: ["Cat", "Squirrel", "Bee"],
                    scents: ["Lavender", "Eucalyptus", "Sage"],
                    crystals: ["Amazonite", "Sapphire", "Fluorite"],
                    places: ["Libraries", "Health spas", "Organic farms"],
                    activities: ["Yoga", "Meditation", "Organizing"]
                },
                // CORRECTED to the proper Virgo list
                zodiactivities: [
                    "Schedule your annual teeth cleaning",
                    "Get a checkup",
                    "Clean out your closet and throw things away",
                    "Organize your paperwork or digital files",
                    "Do something nice for someone who can't repay you",
                    "Buy a new pet",
                    "Analyze a complex problem",
                    "Read a diet book, start a healthier routine",
                    "Pay attention to details",
                    "Do something that requires high precision",
                    "Learn about natural healing remedies",
                    "Write a critique"
                ],
                pastLife: [
                    "In a past life, you were a healer who specialized in herbal medicine and natural remedies",
                    "Your soul remembers being a scribe who meticulously recorded important historical events",
                    "You once served as an advisor to leaders, offering practical wisdom and guidance",
                    "A previous incarnation saw you as a craftsman who perfected your art through attention to detail",
                    "Your soul carries the memory of organizing systems that brought order to chaos"
                ]
            },
            {
                name: "Libra", 
                symbol: "", 
                motto: "I Balance",
                startMonth: 9, 
                startDay: 21, 
                endMonth: 10, 
                endDay: 22, 
                element: "Air", 
                ruler: "Venus", 
                house: "7th House: Long-term Relationships, Marriage, Enemies",
                numbers: [2, 6],
                essence: "Harmonious spirit with diplomatic skills and aesthetic sensibilities",
                tarotCards: {
                    sign: "Justice",
                    ruler: "The Empress"
                },
                decans: [
                    { dateRange: "September 21-October 1", card: "Ace of Swords", degrees: "0-9.59" },
                    { dateRange: "October 1-11", card: "3 of Swords", degrees: "10-19.59" },
                    { dateRange: "October 11-22", card: "4 of Swords", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Cooperative", "Diplomatic", "Fair-minded", "Social", 
                    "Gracious", "Idealistic", "Peaceful", "Hospitable", 
                    "Indecisive", "Avoids confrontation", "Self-pity", "Holds grudges"
                ],
                luckyElements: {
                    colors: ["Pink", "Blue", "Green"],
                    numbers: [6, 15, 24],
                    days: ["Friday", "Monday"],
                    stones: ["Opal", "Lapis Lazuli", "Rose Quartz"],
                    metals: ["Copper", "Bronze"],
                    flowers: ["Rose", "Hydrangea", "Sweet Pea"],
                    foods: ["Desserts", "Fine dining", "Artisanal foods"],
                    directions: ["West", "East"],
                    animals: ["Dove", "Swan", "Rabbit"],
                    scents: ["Rose", "Jasmine", "Vanilla"],
                    crystals: ["Rose Quartz", "Lepidolite", "Kunzite"],
                    places: ["Art galleries", "Gardens", "Social clubs"],
                    activities: ["Socializing", "Art appreciation", "Negotiation"]
                },
                // CORRECTED to the proper Libra list
                zodiactivities: [
                    "Get a manicure",
                    "Wear and care for your rings and bracelets",
                    "See yourself through the eyes of others",
                    "Listen nonjudgmentally to someone else's story",
                    "Look for the lopsided and bring it into balance",
                    "Express gratitude for your relationships",
                    "Choose your battles wisely",
                    "Help a friendship",
                    "Rediscover your inner romantic",
                    "Get a really good mirror",
                    "Keep your promises, commit",
                    "Take a pottery or art appreciation class"
                ],
                pastLife: [
                    "In a past life, you were a judge who brought fairness to disputes and conflicts",
                    "Your soul remembers being an artist who created beauty through balance and harmony",
                    "You once served as a diplomat who negotiated peace between warring factions",
                    "A previous incarnation saw you as a matchmaker who united souls in meaningful relationships",
                    "Your soul carries the memory of bringing opposing forces into perfect equilibrium"
                ]
            },
            {
                name: "Scorpio", 
                symbol: "", 
                motto: "I Desire",
                startMonth: 10, 
                startDay: 23, 
                endMonth: 11, 
                endDay: 21, 
                element: "Water", 
                ruler: "Pluto", 
                house: "8th House: Sex, Death, Other People's Money, Transformation",
                numbers: [9],
                essence: "Intense soul with transformative power and profound emotional depth",
                tarotCards: {
                    sign: "Death",
                    ruler: "Judgement"
                },
                decans: [
                    { dateRange: "October 23-November 2", card: "5 of Cups", degrees: "0-9.59" },
                    { dateRange: "November 3-12", card: "6 of Cups", degrees: "10-19.59" },
                    { dateRange: "November 13-21", card: "7 of Cups", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Resourceful", "Brave", "Passionate", "Stubborn", 
                    "True friend", "Determined", "Intuitive", "Perceptive", 
                    "Jealous", "Secretive", "Violent", "Distrusting"
                ],
                luckyElements: {
                    colors: ["Red", "Black", "Maroon"],
                    numbers: [8, 11, 18],
                    days: ["Tuesday", "Thursday"],
                    stones: ["Topaz", "Obsidian", "Black Tourmaline"],
                    metals: ["Iron", "Plutonium"],
                    flowers: ["Chrysanthemum", "Hibiscus", "Dark Red Rose"],
                    foods: ["Dark chocolate", "Red wine", "Spicy foods"],
                    directions: ["South", "East"],
                    animals: ["Scorpion", "Snake", "Eagle"],
                    scents: ["Patchouli", "Myrrh", "Cedar"],
                    crystals: ["Obsidian", "Black Tourmaline", "Smoky Quartz"],
                    places: ["Mysterious locations", "Caves", "Historic sites"],
                    activities: ["Research", "Investigation", "Psychology"]
                },
                // CORRECTED to the proper Scorpio list
                zodiactivities: [
                    "Get a sexy outfit and wear it",
                    "Visit a steam room",
                    "Be naughty and nice",
                    "Memorialize someone who has passed away",
                    "Get a tarot, palm, or tea leaf reading",
                    "Let go of lingering resentments",
                    "Make a change that will transform your life",
                    "Reveal a secret",
                    "Keep a secret",
                    "Identify your personal super power",
                    "Get your insurance in order",
                    "Spruce up your bathroom"
                ],
                pastLife: [
                    "In a past life, you were an alchemist who transformed base materials into gold",
                    "Your soul remembers being a detective who uncovered hidden truths and solved mysteries",
                    "You once served as a guardian of sacred knowledge, protecting esoteric wisdom from misuse",
                    "A previous incarnation saw you as a therapist who helped others transform their pain into strength",
                    "Your soul carries the memory of experiencing profound transformation through near-death experiences"
                ]
            },
            {
                name: "Sagittarius", 
                symbol: "", 
                motto: "I Seek",
                startMonth: 11, 
                startDay: 21, 
                endMonth: 12, 
                endDay: 21, 
                element: "Fire", 
                ruler: "Jupiter", 
                house: "9th House: Higher Learning, Travel, Religion",
                numbers: [3],
                essence: "Adventurous spirit with philosophical mind and optimistic outlook",
                tarotCards: {
                    sign: "Temperance",
                    ruler: "Wheel of Fortune"
                },
                decans: [
                    { dateRange: "November 20-30", card: "8 of Wands", degrees: "0-9.59" },
                    { dateRange: "December 1-10", card: "9 of Wands", degrees: "10-19.59" },
                    { dateRange: "December 11-20", card: "10 of Wands", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Generous", "Idealistic", "Great sense of humor", "Open-minded", 
                    "Adventurous", "Honest", "Intellectual", "Philosophical", 
                    "Impatient", "Tactless", "Unemotional", "Restless"
                ],
                luckyElements: {
                    colors: ["Purple", "Turquoise", "Orange"],
                    numbers: [3, 9, 12],
                    days: ["Thursday", "Sunday"],
                    stones: ["Turquoise", "Amethyst", "Lapis Lazuli"],
                    metals: ["Tin", "Aluminum"],
                    flowers: ["Carnation", "Dandelion", "Iris"],
                    foods: ["Exotic foods", "International cuisine", "Fruits"],
                    directions: ["East", "South"],
                    animals: ["Horse", "Archer", "Eagle"],
                    scents: ["Sage", "Cedar", "Nutmeg"],
                    crystals: ["Turquoise", "Amethyst", "Lapis Lazuli"],
                    places: ["Foreign countries", "Universities", "Mountains"],
                    activities: ["Travel", "Philosophy", "Sports"]
                },
                zodiactivities: [
                    "Connect with a personal truth",
                    "Be adventurous",
                    "Travel someplace new",
                    "Take a mental journey",
                    "Write a statement of your personal philosophy",
                    "Go to church, temple, or another religious ceremony",
                    "Read the ancient philosophers",
                    "Commit to something",
                    "Have a belly laugh, find the humor in things",
                    "Take a class to increase your knowledge",
                    "Go on a retreat",
                    "Visit a university campus",
                    "Participate in a sport  play, coach, or cheer for your team"
                ],
                pastLife: [
                    "In a past life, you were an explorer who journeyed to distant lands seeking knowledge",
                    "Your soul remembers being a philosopher who pondered the great mysteries of existence",
                    "You once served as a teacher who shared wisdom across cultural boundaries",
                    "A previous incarnation saw you as a pilgrim who traveled to sacred sites around the world",
                    "Your soul carries the memory of expanding human understanding through new discoveries"
                ]
            },
            {
                name: "Capricorn", 
                symbol: "", 
                motto: "I Use",
                startMonth: 12, 
                startDay: 20, 
                endMonth: 1, 
                endDay: 20, 
                element: "Earth", 
                ruler: "Saturn", 
                house: "10th House: Career, Public Self, Recognition",
                numbers: [4],
                essence: "Ambitious soul with practical approach and strong sense of responsibility",
                tarotCards: {
                    sign: "The Devil",
                    ruler: "The World"
                },
                decans: [
                    { dateRange: "December 20-31", card: "2 of Pentacles", degrees: "0-9.59" },
                    { dateRange: "January 1-11", card: "3 of Pentacles", degrees: "10-19.59" },
                    { dateRange: "January 11-20", card: "4 of Pentacles", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Responsible", "Disciplined", "Self-control", "Good managers", 
                    "Ambitious", "Loyal", "Patient", "Conservative", 
                    "Know-it-all", "Unforgiving", "Condescending", "Stubborn"
                ],
                luckyElements: {
                    colors: ["Brown", "Black", "Dark Green"],
                    numbers: [8, 10, 22],
                    days: ["Saturday", "Friday"],
                    stones: ["Garnet", "Onyx", "Jet"],
                    metals: ["Lead", "Silver"],
                    flowers: ["Pansy", "Ivy", "Black Rose"],
                    foods: ["Traditional dishes", "Root vegetables", "Dark chocolate"],
                    directions: ["South", "West"],
                    animals: ["Goat", "Crocodile", "Wolf"],
                    scents: ["Patchouli", "Myrrh", "Vetiver"],
                    crystals: ["Garnet", "Black Tourmaline", "Jet"],
                    places: ["Corporate offices", "Historic buildings", "Mountains"],
                    activities: ["Business", "Politics", "Mountain climbing"]
                },
                // CORRECTED to the proper Capricorn list
                zodiactivities: [
                    "List all your achievements",
                    "Find or be a mentor",
                    "Get a bone density test",
                    "Discover ways you are your own best parent",
                    "Take your boss to lunch",
                    "Be a good steward",
                    "Exfoliate your skin, especially your knees",
                    "Get serious about something",
                    "Discover your inner board of directors",
                    "Read by example",
                    "Read a biography of someone you admire",
                    "Work with crystals",
                    "Schedule your annual teeth cleaning"
                ],
                pastLife: [
                    "In a past life, you were an architect who designed structures that have stood for centuries",
                    "Your soul remembers being a leader who built institutions that served future generations",
                    "You once served as a guardian of traditions, preserving cultural heritage for posterity",
                    "A previous incarnation saw you as a strategist who planned and executed ambitious projects",
                    "Your soul carries the memory of achieving mastery through patience and perseverance"
                ]
            },
            {
                name: "Aquarius", 
                symbol: "", 
                motto: "I Know",
                startMonth: 1, 
                startDay: 19, 
                endMonth: 2, 
                endDay: 18, 
                element: "Air", 
                ruler: "Uranus", 
                house: "11th House",
                numbers: [7],
                essence: "Innovative mind with humanitarian values and unconventional thinking",
                tarotCards: {
                    sign: "The Star",
                    ruler: "The Fool"
                },
                decans: [
                    { dateRange: "January 19-29", card: "5 of Swords", degrees: "0-9.59" },
                    { dateRange: "Jan 30-Feb 7", card: "6 of Swords", degrees: "10-19.59" },
                    { dateRange: "Feb 8-18", card: "7 of Swords", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Progressive", "Original", "Independent", "Humanitarian", 
                    "Intellectual", "Honest", "Loyal", "Inventive", 
                    "Unemotional", "Temperamental", "Aloof", "Stubborn"
                ],
                luckyElements: {
                    colors: ["Blue", "Green", "Silver"],
                    numbers: [4, 11, 22],
                    days: ["Saturday", "Sunday"],
                    stones: ["Amethyst", "Aquamarine", "Turquoise"],
                    metals: ["Uranium", "Aluminum"],
                    flowers: ["Orchid", "Bird of Paradise", "Gladiolus"],
                    foods: ["Vegetarian dishes", "Exotic fruits", "Unusual combinations"],
                    directions: ["North", "East"],
                    animals: ["Dolphin", "Owl", "Eagle"],
                    scents: ["Eucalyptus", "Peppermint", "Lemon"],
                    crystals: ["Amethyst", "Aquamarine", "Turquoise"],
                    places: ["Technology hubs", "Futuristic cities", "Humanitarian organizations"],
                    activities: ["Innovation", "Social activism", "Technology"]
                },
                zodiactivities: [
                    "Make a wish list of your lifetime, make a bucket list",
                    "Do something to make a dream come true",
                    "Spend extra time with friends",
                    "Network",
                    "Erase bigotry when and where you can",
                    "Stand up for the underdog",
                    "Join your local astrology group",
                    "Make an anonymous donation to a service organization",
                    "Indulge in a New Age spa service",
                    "Shop for electrical appliances or a new computer",
                    "Break the routine  experiment!",
                    "Learn a phrase in Esperanto, the 'world-wide language'"
                ],
                pastLife: [
                    "In a past life, you were an inventor who created revolutionary technologies",
                    "Your soul remembers being a visionary who saw possibilities others couldn't imagine",
                    "You once served as a reformer who challenged outdated systems and brought progress",
                    "A previous incarnation saw you as a community organizer who united people for common causes",
                    "Your soul carries the memory of bringing knowledge that was ahead of its time"
                ]
            },
            {
                name: "Pisces", 
                symbol: "", 
                motto: "I Believe",
                startMonth: 2, 
                startDay: 19, 
                endMonth: 3, 
                endDay: 20, 
                element: "Water", 
                ruler: "Neptune", 
                house: "12th House",
                numbers: [7],
                essence: "Compassionate soul with intuitive gifts and artistic sensibilities",
                tarotCards: {
                    sign: "The Moon",
                    ruler: "The Hanged Man"
                },
                decans: [
                    { dateRange: "Feb 19-28", card: "8 of Cups", degrees: "0-9.59" },
                    { dateRange: "Feb 29-Mar 10", card: "9 of Cups", degrees: "10-19.59" },
                    { dateRange: "Mar 11-20", card: "10 of Cups", degrees: "20-29.59" }
                ],
                characterTraits: [
                    "Compassionate", "Artistic", "Intuitive", "Gentle", 
                    "Wise", "Musical", "Imaginative", "Romantic", 
                    "Fearful", "Overly trusting", "Sad", "Desire to escape reality"
                ],
                luckyElements: {
                    colors: ["Sea Green", "Purple", "Blue"],
                    numbers: [3, 7, 12],
                    days: ["Thursday", "Monday"],
                    stones: ["Aquamarine", "Amethyst", "Moonstone"],
                    metals: ["Tin", "Platinum"],
                    flowers: ["Water Lily", "Jasmine", "Lotus"],
                    foods: ["Seafood", "Mystical foods", "Wine"],
                    directions: ["North", "West"],
                    animals: ["Fish", "Dolphin", "Whale"],
                    scents: ["Jasmine", "Lily", "Sea breeze"],
                    crystals: ["Amethyst", "Aquamarine", "Fluorite"],
                    places: ["Oceans", "Spiritual retreats", "Artistic venues"],
                    activities: ["Meditation", "Art", "Music"]
                },
                // CORRECTED to the proper Pisces list (13 items total)
                zodiactivities: [
                    "Have a pedicure",
                    "Get a reflexology massage",
                    "Spend time alone",
                    "Go to the ocean",
                    "Seek a spiritual connection",
                    "Visit the Aquarium, or get one",
                    "Go fishing, with or without a pole",
                    "Sing hymns",
                    "Rid yourself of chaos ~ mental and physical",
                    "Listen to your favorite music",
                    "Visit your podiatrist",
                    "Buy shoes",
                    "Keep a dream journal"
                ],
                pastLife: [
                    "In a past life, you were a mystic who communed with divine realms through meditation",
                    "Your soul remembers being an artist who created works that transcended ordinary reality",
                    "You once served as a spiritual guide who helped others connect with their higher selves",
                    "A previous incarnation saw you as a healer who used intuitive abilities to diagnose and treat",
                    "Your soul carries the memory of experiencing the interconnectedness of all things"
                ]
            }
        ];

        const moonPhases = [
            "New Moon", "Waxing Crescent", "First Quarter", "Waxing Gibbous", 
            "Full Moon", "Waning Gibbous", "Last Quarter", "Waning Crescent"
        ];

        // === UPDATED TAROT CARD DATA FOR ALL 78 CARDS ===
        const tarotCardDetails = [
            // --- Major Arcana ---
            { 
                name: "The Fool", 
                description: "The Fool represents new beginnings, having faith in the future, being inexperienced, spurring forwards and being innocent. He is the original number zero, symbolizing unlimited potential.",
                upright: "Beginnings, Innocence, Spontaneity, Free Spirit, Leap of Faith",
                reversed: "Recklessness, Fear, Naivet, Taking chances, Lack of direction",
                imageName: "The Fool"
            },
            { 
                name: "The Magician", 
                description: "The Magician card is about having all the tools, resources, and energy you need to manifest your desires. He bridges the gap between the divine and the mundane.",
                upright: "Manifestation, Resourcefulness, Power, Inspired action, Initiative",
                reversed: "Manipulation, Poor planning, Untapped talents, Illusion, Trickery",
                imageName: "The Magician"
            },
            { 
                name: "The High Priestess", 
                description: "She sits between the pillars of light and darkness, holding the secrets of the subconscious. She represents intuition, mystery, and passive knowledge.",
                upright: "Intuition, Sacred knowledge, Divine feminine, The subconscious, Mystery",
                reversed: "Secrets, Withheld information, Emotional blockage, Lack of inner voice",
                imageName: "The High Priestess"
            },
            { 
                name: "The Empress", 
                description: "The Empress is the Mother of the Tarot, symbolizing fertility, creativity, and the abundance of nature. She encourages you to connect with your feminine side.",
                upright: "Femininity, Beauty, Nature, Nurturing, Abundance, Fertility",
                reversed: "Creative block, Dependency on others, Smothering, Emptiness",
                imageName: "The Empress"
            },
            { 
                name: "The Emperor", 
                description: "The Emperor is the paternal figure of the Tarot, representing structure, authority, and control. He is a symbol of logic and disciplined effort.",
                upright: "Authority, Structure, Establishment, Father figure, Leadership, Logic",
                reversed: "Domination, Excessive control, Tyranny, Rigidity, Immaturity",
                imageName: "The Emperor"
            },
            { 
                name: "The Hierophant", 
                description: "The Hierophant represents spiritual wisdom, tradition, and adherence to social structures. He teaches through conventional education and seeking wise counsel.",
                upright: "Spiritual wisdom, Religious beliefs, Conformity, Tradition, Mentor",
                reversed: "Rebellion, Non-conformity, New approaches, Imprisonment by dogma",
                imageName: "The Hierophant"
            },
            { 
                name: "The Lovers", 
                description: "Represents conscious connections, harmonious relationships, alignment of values, and decisions regarding personal ethics or a relationship choice.",
                upright: "Love, Union, Relationships, Alignment, Choices, Harmony",
                reversed: "Disharmony, Imbalance, Misalignment of values, Conflict in a relationship",
                imageName: "The Lovers"
            },
            { 
                name: "The Chariot", 
                description: "The Chariot represents determined focus, willpower, and moving forward with purpose, overcoming obstacles through confidence and control.",
                upright: "Willpower, Victory, Action, Determination, Self-control, Triumph",
                reversed: "Lack of control/direction, Opposition, Defeat, Aggression, Powerlessness",
                imageName: "The Chariot"
            },
            { 
                name: "Strength", 
                description: "Strength signifies not brute force, but inner fortitude, courage, and the gentle, compassionate mastery of one's own primal nature or fear.",
                upright: "Strength, Courage, Patience, Compassion, Inner fortitude",
                reversed: "Weakness, Self-doubt, Lack of confidence, Cowardice, Insecurity",
                imageName: "Strength"
            },
            { 
                name: "The Hermit", 
                description: "The Hermit represents self-reflection, introspection, and the search for inner truth. He steps away from the world to gain wisdom.",
                upright: "Introspection, Solitude, Inner guidance, Self-reflection, Search for truth",
                reversed: "Isolation, Loneliness, Withdrawal, Rejection of help, Excessive introspection",
                imageName: "The Hermit"
            },
            { 
                name: "Wheel of Fortune", 
                description: "The Wheel symbolizes the cycles of life, destiny, and the inevitability of change. It reminds us that what goes up must come down.",
                upright: "Good luck, Karma, Life cycles, Destiny, Change, Turning point",
                reversed: "Bad luck, Disruption, Failure, Negative external forces, Delays",
                imageName: "Wheel of Fortune"
            },
            { 
                name: "Justice", 
                description: "Justice represents fairness, truth, and the law. It calls for an objective assessment of the facts to ensure a just outcome.",
                upright: "Justice, Fairness, Truth, Law, Cause and effect, Objectivity",
                reversed: "Unfairness, Dishonesty, Legal complications, Bias, Unaccountability",
                imageName: "Justice"
            },
            { 
                name: "The Hanged Man", 
                description: "The Hanged Man suggests a time of surrender, pause, and seeing things from a completely new perspective. Sacrifice may be necessary for enlightenment.",
                upright: "Pause, Surrender, New perspectives, Sacrifice, Release, Waiting",
                reversed: "Stalling, Resistance, Delay, Dogmatic view, Missed opportunity",
                imageName: "The Hanged Man"
            },
            { 
                name: "Death", 
                description: "Represents transformation, endings, and new beginnings (not literal death). It's a necessary clearing to allow for fresh starts.",
                upright: "Endings, Beginnings, Change, Transformation, Transition, Release",
                reversed: "Resistance to change, Stagnation, Fear of new things, Dependency",
                imageName: "Death"
            },
            { 
                name: "Temperance", 
                description: "Temperance represents balance, moderation, patience, and finding harmony by blending seemingly opposite forces.",
                upright: "Balance, Moderation, Patience, Harmony, Purpose, Self-healing",
                reversed: "Imbalance, Excess, Extremes, Lack of self-control, Discord",
                imageName: "Temperance"
            },
            { 
                name: "The Devil", 
                description: "The Devil represents shadow self, bondage, addiction, and materialism. It signifies being chained by false beliefs or desires.",
                upright: "Bondage, Addiction, Materialism, Shadow self, Restriction, Lust",
                reversed: "Freedom, Release, Breaking habits, Enlightenment, Detachment",
                imageName: "The Devil"
            },
            { 
                name: "The Tower", 
                description: "The Tower represents sudden, violent change, upheaval, and breakdown. While traumatic, it is often necessary to clear away false foundations.",
                upright: "Sudden change, Upheaval, Chaos, Revelation, Destruction, Breakdown",
                reversed: "Averting disaster, Fear of change, Personal transformation in progress",
                imageName: "The Tower"
            },
            { 
                name: "The Star", 
                description: "The Star is a beacon of hope, inspiration, and renewal. After a period of chaos, she offers calm, spiritual connection, and guidance for the future.",
                upright: "Hope, Spirituality, Renewal, Inspiration, Serenity, Guidance",
                reversed: "Despair, Lack of faith, Hopelessness, Disconnection, Pessimism",
                imageName: "The Star"
            },
            { 
                name: "The Moon", 
                description: "The Moon represents illusion, intuition, the subconscious, and things hidden. It encourages trusting your inner voice despite confusion or uncertainty.",
                upright: "Illusion, Intuition, Fear, Subconscious, Mystery, Uncertainty",
                reversed: "Release of fear, Clarity, Understanding dreams, Truth revealed",
                imageName: "The Moon"
            },
            { 
                name: "The Sun", 
                description: "The Sun is the most positive card, symbolizing success, joy, and vitality. It promises clarity, optimism, and bright happiness.",
                upright: "Joy, Success, Vitality, Optimism, Clarity, Celebration",
                reversed: "Lack of clarity, Temporary sadness, Blocked happiness, Pessimism",
                imageName: "The Sun"
            },
            { 
                name: "Judgement", 
                description: "Judgement represents a calling or awakening, self-evaluation, and absolution. It's a moment of final review before moving to the next level.",
                upright: "Judgement, Rebirth, Inner calling, Absolution, Awakening, Review",
                reversed: "Self-doubt, Unwillingness to change, Ignoring the call, Self-condemnation",
                imageName: "Judgement"
            },
            { 
                name: "The World", 
                description: "The World signifies completion, achievement, travel, and absolute success. It is the final card of the Major Arcana, representing a grand cycle ending.",
                upright: "Completion, Achievement, Travel, Wholeness, Success, Integration",
                reversed: "Incomplete work, Short-cuts, Delays, Lack of closure, Resistance to finality",
                imageName: "The World"
            },
            
            // --- Minor Arcana: WANDS (Action, Energy, Will) ---
            { 
                name: "Ace of Wands", 
                description: "The seed of fire. Represents a new burst of energy, inspiration, or a new creative project.",
                upright: "Creation, Beginning, Potential, Opportunity, Breakthrough",
                reversed: "Lack of energy, Blocked creativity, Delay, Missed opportunities",
                imageName: "Ace of Wands"
            },
            { 
                name: "Two of Wands", 
                description: "Planning and foresight. Balancing energy between what you have and what you want to achieve next.",
                upright: "Future planning, Progress, Personal power, Boldness",
                reversed: "Fear of change, Lack of planning, Waiting, Loss of personal power",
                imageName: "Two of Wands"
            },
            { 
                name: "Three of Wands", 
                description: "Expansion and viewing a promising future. Your ship has come in, time to expand beyond the immediate.",
                upright: "Expansion, Foresight, Overseas trade, Looking ahead, Success",
                reversed: "Delays, Obstacles, Frustration, Failure to see potential",
                imageName: "Three of Wands"
            },
            { 
                name: "Four of Wands", 
                description: "Celebration and stability. A happy reunion or secure home life, often symbolizing a solid foundation.",
                upright: "Celebration, Harmony, Homecomings, Stable foundation, Marriage",
                reversed: "Instability, Transition, Broken security, Lack of support",
                imageName: "Four of Wands"
            },
            { 
                name: "Five of Wands", 
                description: "Competition and minor conflict. A constructive struggle or playful rivalry that leads to growth.",
                upright: "Competition, Disagreement, Healthy rivalry, Conflict, Minor struggles",
                reversed: "Conflict avoidance, End of strife, Harmony restored, Cheating",
                imageName: "Five of Wands"
            },
            { 
                name: "Six of Wands", 
                description: "Victory and public recognition. Success after effort, often involving public praise or achievement.",
                upright: "Victory, Success, Public recognition, Confidence, Self-belief",
                reversed: "Ego, Betrayal, Failure, Loss of confidence, Unwarranted pride",
                imageName: "Six of Wands"
            },
            { 
                name: "Seven of Wands", 
                description: "Defense and courage. Standing up for your position against opposition or competition.",
                upright: "Defense, Challenge, Courage, Perseverance, Standing your ground",
                reversed: "Giving up, Overwhelmed, Timidity, Loss of advantage",
                imageName: "Seven of Wands"
            },
            { 
                name: "Eight of Wands", 
                description: "Speed and sudden action. Messages, travel, or quick movement toward a goal.",
                upright: "Action, Air travel, Messages, Movement, Quick decisions",
                reversed: "Delay, Frustration, Halted progress, Slow decisions",
                imageName: "Eight of Wands"
            },
            { 
                name: "Nine of Wands", 
                description: "Resilience and final strength. The last effort before victory, suggesting exhaustion but determination.",
                upright: "Resilience, Courage, Determination, Test of faith, Last stand",
                reversed: "Exhaustion, Paranoia, Lack of stamina, Defensive posture",
                imageName: "Nine of Wands"
            },
            { 
                name: "Ten of Wands", 
                description: "Burden and responsibility. Carrying a heavy load, often self-imposed, that needs to be released.",
                upright: "Burden, Responsibility, Overload, Hard work, Stress",
                reversed: "Releasing a burden, Delegation, Failure to cope, Taking on too much",
                imageName: "Ten of Wands"
            },
            { 
                name: "Page of Wands", 
                description: "The youthful messenger of Wands. New passion, exciting news, or a burst of creative ideas.",
                upright: "Excitement, Exploration, First sight, Creative news, Free spirit",
                reversed: "Bad news, Delays, Halted excitement, Pessimism, Fickleness",
                imageName: "Page of Wands"
            },
            { 
                name: "Knight of Wands", 
                description: "The energetic driver. Rapid movement, spontaneous action, and fiery, sometimes reckless, enthusiasm.",
                upright: "Action, Travel, Ambition, Change, Spontaneity, Impulsiveness",
                reversed: "Delay, Frustration, Halted action, Rashness, Disruption",
                imageName: "Knight of Wands"
            },
            { 
                name: "Queen of Wands", 
                description: "The confident and charismatic leader. Possesses warmth, vitality, and creative focus.",
                upright: "Courage, Confidence, Independence, Charisma, Social butterfly",
                reversed: "Self-serving, Jealousy, Temper, Demanding, Vain",
                imageName: "Queen of Wands"
            },
            { 
                name: "King of Wands", 
                description: "The mature master of fire. Visionary, authoritative, and focused on creative realization.",
                upright: "Visionary, Leader, Entrepreneur, Authority, Passionate",
                reversed: "Tyrannical, Overbearing, Ruthless, Impractical, Haste",
                imageName: "King of Wands"
            },

            // --- Minor Arcana: CUPS (Emotion, Love, Intuition) ---
            { 
                name: "Ace of Cups", 
                description: "The seed of water. Represents a new beginning in love, emotion, or creative intuition.",
                upright: "New love, Deep feelings, Compassion, Joy, Emotional opportunity",
                reversed: "Blocked emotion, Repressed feelings, Emptiness, Lost opportunity",
                imageName: "Ace of Cups"
            },
            { 
                name: "Two of Cups", 
                description: "Harmony and partnership. A soulful union between two people, often in love or close friendship.",
                upright: "Unity, Partnership, Mutual attraction, Harmonious relationship, Engagement",
                reversed: "Conflict, Break-up, Imbalance, Misunderstanding, Separation",
                imageName: "Two of Cups"
            },
            { 
                name: "Three of Cups", 
                description: "Celebration and community. A happy reunion, event, or the fruition of a communal project.",
                upright: "Celebration, Friendship, Community, Success, Reunion, Fertility",
                reversed: "Gossip, Overindulgence, Loss of friendship, Isolation",
                imageName: "Three of Cups"
            },
            { 
                name: "Four of Cups", 
                description: "Apathy and dissatisfaction. Boredom despite gifts, refusing emotional offerings.",
                upright: "Apathy, Meditation, Contemplation, Boredom, Missed opportunity",
                reversed: "New opportunities, Excitement, Re-evaluation, Choosing happiness",
                imageName: "Four of Cups"
            },
            { 
                name: "Five of Cups", 
                description: "Grief and regret. Dwelling on loss while ignoring what remains (the two upright cups).",
                upright: "Loss, Regret, Grief, Sadness, Focusing on the negative",
                reversed: "Acceptance, Moving on, Forgiveness, Release from sadness",
                imageName: "Five of Cups"
            },
            { 
                name: "Six of Cups", 
                description: "Nostalgia and childhood memories. Thinking of the past, or acts of kindness and innocence.",
                upright: "Nostalgia, Childhood, Innocence, Reunion, Gifting, Past influences",
                reversed: "Living in the past, Stagnation, Adulthood, Future focus",
                imageName: "Six of Cups"
            },
            { 
                name: "Seven of Cups", 
                description: "Illusion and choice. Fantasies and dreams without real action, often leading to confusion.",
                upright: "Choice, Illusion, Fantasy, Wishful thinking, Overwhelm",
                reversed: "Clarity, Focused effort, Willpower, Realistic view",
                imageName: "Seven of Cups"
            },
            { 
                name: "Eight of Cups", 
                description: "Abandonment and moving on. Walking away from an emotional situation that no longer serves you.",
                upright: "Abandonment, Escapism, Travel, Seeking truth, Moving on",
                reversed: "Fear of change, Stagnation, Halted journey, Clinging to the past",
                imageName: "Eight of Cups"
            },
            { 
                name: "Nine of Cups", 
                description: "Wishes fulfilled and satisfaction. Emotional contentment and feeling lucky, the 'wish card'.",
                upright: "Wishes come true, Satisfaction, Emotional stability, Comfort, Good fortune",
                reversed: "Greed, Dissatisfaction, Unrealistic expectations, Materialism",
                imageName: "Nine of Cups"
            },
            { 
                name: "Ten of Cups", 
                description: "Perfect harmony and happiness. Emotional bliss, family contentment, and long-term joy.",
                upright: "Bliss, Harmony, Family, Divine love, Emotional fulfillment",
                reversed: "Broken family, Discord, Emotional instability, Loss of home",
                imageName: "Ten of Cups"
            },
            { 
                name: "Page of Cups", 
                description: "The playful messenger of Cups. Creative inspiration, emotional news, or a romantic offer.",
                upright: "Messenger, Creativity, New feelings, Romantic offers, Intuition",
                reversed: "Emotional immaturity, Bad news, Disappointment, Stagnation",
                imageName: "Page of Cups"
            },
            { 
                name: "Knight of Cups", 
                description: "The charming artist or romantic. Bringing an invitation, an offer, or a deep proposal.",
                upright: "Romance, Invitation, Charm, Proposal, Diplomat, Imagination",
                reversed: "Moodiness, Deception, Broken promises, Disillusionment",
                imageName: "Knight of Cups"
            },
            { 
                name: "Queen of Cups", 
                description: "The deeply intuitive and compassionate counselor. A loving, psychic, and caring figure.",
                upright: "Compassion, Intuition, Calmness, Nurturing, Emotional security",
                reversed: "Insecurity, Dependence, Martyrdom, Emotional manipulation",
                imageName: "Queen of Cups"
            },
            { 
                name: "King of Cups", 
                description: "The mature master of emotion. Balanced, calm, tolerant, and capable of deep, controlled feelings.",
                upright: "Emotional balance, Compassion, Diplomacy, Tolerance, Counselor",
                reversed: "Moodiness, Manipulation, Emotional outbursts, Scandal",
                imageName: "King of Cups"
            },

            // --- Minor Arcana: SWORDS (Intellect, Truth, Conflict) ---
            { 
                name: "Ace of Swords", 
                description: "The seed of air. A mental breakthrough, sudden clarity, or a moment of triumph over a major mental hurdle.",
                upright: "Clarity, Triumph, Mental breakthrough, New idea, Truth",
                reversed: "Confusion, Blocked communication, Misuse of power, Mental fog",
                imageName: "Ace of Swords"
            },
            { 
                name: "Two of Swords", 
                description: "Stalemate and difficult choices. Emotional blockade, refusal to see the truth, often blindfolded.",
                upright: "Stalemate, Indecision, Blocked emotions, Truce, Denial",
                reversed: "Release, Acceptance, Clarity, Overcoming fear, Resolution",
                imageName: "Two of Swords"
            },
            { 
                name: "Three of Swords", 
                description: "Heartbreak and painful separation. Emotional pain caused by conflict or betrayal.",
                upright: "Heartbreak, Separation, Betrayal, Loss, Loneliness",
                reversed: "Recovery, Forgiveness, Release from pain, Reconciliation",
                imageName: "Three of Swords"
            },
            { 
                name: "Four of Swords", 
                description: "Rest and recovery. Needing a break, recuperation from mental stress or conflict.",
                upright: "Rest, Retreat, Recuperation, Peace, Solitude, Healing",
                reversed: "Restlessness, Burnout, Activity, Release from retreat",
                imageName: "Four of Swords"
            },
            { 
                name: "Five of Swords", 
                description: "Self-defeat or winning at a cost. Victory that leaves everyone feeling diminished or loss of integrity.",
                upright: "Conflict, Loss, Hollow victory, Bullying, Dishonor",
                reversed: "End of conflict, Reconciliation, New perspective, Desire to make peace",
                imageName: "Five of Swords"
            },
            { 
                name: "Six of Swords", 
                description: "Transition and passage. Moving away from troubled times toward a calmer future.",
                upright: "Transition, Passage, Moving on, Travel, Escaping difficulty",
                reversed: "Stuck in the past, Halted journey, Resistance to change",
                imageName: "Six of Swords"
            },
            { 
                name: "Seven of Swords", 
                description: "Deception and calculated risk. Sneaking around, theft, or trying to get away with something.",
                upright: "Deception, Theft, Betrayal, Slyness, Leaving something behind",
                reversed: "Coming clean, Confession, Accountability, Facing consequences",
                imageName: "Seven of Swords"
            },
            { 
                name: "Eight of Swords", 
                description: "Restriction and feeling trapped. Self-imposed limitations or being bound by fear and negative thoughts.",
                upright: "Restriction, Feeling trapped, Imprisonment, Fear, Self-imposed limits",
                reversed: "Freedom, Release, New perspective, Self-acceptance, Clarity",
                imageName: "Eight of Swords"
            },
            { 
                name: "Nine of Swords", 
                description: "Anxiety and nightmare. Overwhelming worry, guilt, or fear keeping you awake.",
                upright: "Anxiety, Worry, Nightmare, Guilt, Fear, Despair",
                reversed: "Release from fear, Hope, Improvement, Finding solution",
                imageName: "Nine of Swords"
            },
            { 
                name: "Ten of Swords", 
                description: "Ruin and total ending. The worst is over, suggesting a necessary, final defeat to make space for rebirth.",
                upright: "Ruin, Complete ending, Back-stabbing, Defeat, Crisis, Rock bottom",
                reversed: "Recovery, Inevitable ending, Fear of future, Resistance to closure",
                imageName: "Ten of Swords"
            },
            { 
                name: "Page of Swords", 
                description: "The curious messenger of Swords. New ideas, quick thinking, and a sharp, sometimes aggressive, mind.",
                upright: "Curiosity, New ideas, Sharp mind, Truth, Vigilance, Energy",
                reversed: "Scandal, Gossip, Impostor, Scattered thoughts, Hidden knowledge",
                imageName: "Page of Swords"
            },
            { 
                name: "Knight of Swords", 
                description: "The reckless charger. Hasty action, ambitious but potentially aggressive approach, charging forward.",
                upright: "Ambition, Action, Recklessness, Impulsiveness, Courage",
                reversed: "Brashness, Haste, Delay, Ineffective action, Overconfident",
                imageName: "Knight of Swords"
            },
            { 
                name: "Queen of Swords", 
                description: "The sharp, intelligent, and honest intellectual. Clear boundaries and incisive judgment.",
                upright: "Intellectual, Independent, Sharp wit, Clear-minded, Honest",
                reversed: "Cruelty, Coldness, Intolerance, Narrow-minded, Vengeful",
                imageName: "Queen of Swords"
            },
            { 
                name: "King of Swords", 
                description: "The mature master of thought. Authority, intellectual rigor, and disciplined logic.",
                upright: "Intellectual power, Authority, Truth, Discipline, Judge, Analytical",
                reversed: "Tyranny, Manipulation, Emotional control, Abuse of power",
                imageName: "King of Swords"
            },

            // --- Minor Arcana: PENTACLES (Material, Earth, Stability) ---
            { 
                name: "Ace of Pentacles", 
                description: "The seed of earth. A new financial opportunity, material gift, or a grounding energy.",
                upright: "Opportunity, Prosperity, New job, Manifestation, Security",
                reversed: "Lost opportunity, Financial loss, Instability, Greed",
                imageName: "Ace of Pentacles"
            },
            { 
                name: "Two of Pentacles", 
                description: "Balance and prioritizing. Juggling resources, time, or finances to maintain equilibrium.",
                upright: "Balance, Juggling, Adaptability, Prioritizing, Resourcefulness",
                reversed: "Imbalance, Overwhelmed, Financial worry, Disorganization",
                imageName: "Two of Pentacles"
            },
            { 
                name: "Three of Pentacles", 
                description: "Teamwork and initial recognition. Collaborating with others to build or master a skill.",
                upright: "Teamwork, Collaboration, Skill, Recognition, Learning",
                reversed: "Mediocrity, Lack of skill, Disharmony in work, Isolation",
                imageName: "Three of Pentacles"
            },
            { 
                name: "Four of Pentacles", 
                description: "Possessiveness and conservatism. Clinging to material security, fear of loss, or hoarding.",
                upright: "Security, Conservation, Control, Materialism, Boundaries",
                reversed: "Releasing control, Generosity, Losing security, Greed",
                imageName: "Four of Pentacles"
            },
            { 
                name: "Five of Pentacles", 
                description: "Insecurity and isolation. Feeling left out or experiencing financial/health worries, often when help is near.",
                upright: "Hardship, Poverty, Insecurity, Isolation, Financial worry",
                reversed: "Recovery, Charity, New job, Overcoming hardship, Finding help",
                imageName: "Five of Pentacles"
            },
            { 
                name: "Six of Pentacles", 
                description: "Generosity and charity. Giving or receiving money or gifts, often symbolizing fair distribution.",
                upright: "Generosity, Charity, Giving and receiving, Fair exchange, Philanthropy",
                reversed: "Debt, Greed, Selfishness, Unfair exchange, Unequal power",
                imageName: "Six of Pentacles"
            },
            { 
                name: "Seven of Pentacles", 
                description: "Patience and waiting. Taking a pause to assess an investment or project before moving forward.",
                upright: "Patience, Investment, Waiting, Assessment, Perseverance",
                reversed: "Impatience, Poor investment, Lack of vision, Delayed rewards",
                imageName: "Seven of Pentacles"
            },
            { 
                name: "Eight of Pentacles", 
                description: "Skill and diligent work. Focusing on mastering a craft through hard, dedicated work.",
                upright: "Apprenticeship, Skill, Hard work, Dedication, Quality control",
                reversed: "Lack of focus, Perfectionism, Shoddy work, Unambitious",
                imageName: "Eight of Pentacles"
            },
            { 
                name: "Nine of Pentacles", 
                description: "Luxury and self-sufficiency. Enjoying the fruits of your labor, independence, and refinement.",
                upright: "Luxury, Self-sufficiency, Independence, Financial gain, Solitude",
                reversed: "Loss of independence, Financial setback, Overspending, Theft",
                imageName: "Nine of Pentacles"
            },
            { 
                name: "Ten of Pentacles", 
                description: "Wealth and family legacy. Complete financial and material security, lasting happiness, and tradition.",
                upright: "Wealth, Legacy, Family matters, Stability, Completion, Inheritance",
                reversed: "Financial ruin, Family conflict, Broken legacy, Instability",
                imageName: "Ten of Pentacles"
            },
            { 
                name: "Page of Pentacles", 
                description: "The studious messenger of Pentacles. Financial news, scholarship, or a new practical endeavor.",
                upright: "Financial news, Opportunity, Student, Focus, New career path",
                reversed: "Bad news, Wastefulness, Lack of focus, Missed opportunity, Immaturity",
                imageName: "Page of Pentacles"
            },
            { 
                name: "Knight of Pentacles", 
                description: "The patient and dependable worker. Slow but steady progress, reliability, and responsibility.",
                upright: "Efficiency, Diligence, Routine, Hard worker, Reliable, Slow progress",
                reversed: "Laziness, Sloth, Stagnation, Inertia, Recklessness",
                imageName: "Knight of Pentacles"
            },
            { 
                name: "Queen of Pentacles", 
                description: "The practical, nurturing, and abundant earth mother. Focused on home, comfort, and security.",
                upright: "Nurturing, Practical, Generous, Secure, Abundance, Mother figure",
                reversed: "Possessiveness, Neglect, Financial insecurity, Smothering",
                imageName: "Queen of Pentacles"
            },
            { 
                name: "King of Pentacles", 
                description: "The mature master of wealth. Success, leadership, and material security achieved through discipline.",
                upright: "Success, Wealth, Security, Businessman, Provider, Leadership",
                reversed: "Greed, Corruption, Financial failure, Materialistic, Self-indulgence",
                imageName: "King of Pentacles"
            }
        ];
        
        // List of all tarot card names (kept for the original allTarotCards context)
        const allTarotCards = tarotCardDetails.map(card => card.name);


        let userData = {
            dob: null,
            zodiacSign: null,
            age: null,
            daysLived: null,
            birthDay: null,
            moonPhase: null,
            lifePathNumber: null
        };

        let predictionHistory = [];
        let currentTarotCards = []; // Will store the full card objects, not just names
        let predictionsGenerated = false;
        let tarotRedrawsLeft = 1; // Limit for "Draw New Cards"
        let isMusicPlaying = false; // Start with music not playing
        let musicUnlocked = false; // Track if music has been unlocked by user interaction
        let musicInitialized = false; // Track if music has been properly initialized
        let tabAnimationInterval = null; // Variable to hold the interval for the continuous tab animation

        // --- Utility Functions (Mostly Unchanged) ---

        // This function is now redundant but kept for structure
        function showErrorMessage(show) {
            const errorMessage = document.getElementById('errorMessage');
            if (show) {
                errorMessage.classList.add('visible');
            } else {
                errorMessage.classList.remove('visible');
            }
        }
        
        // Helper function for pseudo-random determination based on input
        function pseudoRandomDeterminism(seed, options) {
            let hash = 0;
            for (let i = 0; i < seed.length; i++) {
                hash = (hash << 5) - hash + seed.charCodeAt(i);
                hash |= 0; // Convert to 32bit integer
            }
            const index = Math.abs(hash) % options.length;
            return options[index];
        }
        
        // === MODIFIED: Reveal Future Prediction and populate UI ===
        async function revealFuture(isRedraw = false) {
            const futureReveal = document.getElementById('futureReveal');
            const futureTextElement = document.getElementById('futureText');
            const futureDateElement = document.getElementById('futureDate');
            const predictionCategoriesElement = document.getElementById('predictionCategories');
            
            // Generate the core prediction
            const predictionData = await getFuturePrediction();
            
            // Update UI with the new prediction
            futureTextElement.textContent = predictionData.text;
            futureDateElement.innerHTML = getFutureDate(); /* Use innerHTML to parse bold tag */
            
            // Display category
            predictionCategoriesElement.innerHTML = `<div class="prediction-category"> Today's Focus: ${predictionData.category}</div>`;
            
            // Only add active class once (for the animation) and ensure it's visible
            futureReveal.classList.add('visible');
            if (!isRedraw) {
                futureReveal.classList.add('active');
            }
            
            // Update past life predictions for the redesigned section
            updatePastLifeInsights();
        }

        // The core prediction engine - completely local and deterministic
        async function getFuturePrediction() {
            // Seed for determinism is a combination of user's core data
            const seed = `${userData.zodiacSign.name}-${userData.moonPhase}-${userData.lifePathNumber}-${new Date().getHours()}`;
            
            const categories = ["Love & Relationships", "Career & Ambition", "Wealth & Finance", "Personal Growth", "Health & Well-being"];
            const selectedCategory = pseudoRandomDeterminism(seed, categories);
            
            let predictionText = '';
            
            // Logic based on Zodiac Sign and Life Path Number
            if (userData.lifePathNumber === 1 || userData.zodiacSign.element === "Fire") {
                predictionText = `The stars align for a bold **${selectedCategory}** move. Your initiative, combined with your Life Path ${userData.lifePathNumber} drive, will lead to a significant breakthrough. Do not fear the unknown; lead the way with fiery passion.`;
            } else if (userData.lifePathNumber === 2 || userData.zodiacSign.element === "Water") {
                predictionText = `Focus on collaboration and emotional understanding in your **${selectedCategory}** sector. The Moon's gentle guidance asks you to trust your intuition and seek harmonious partnerships. A subtle influence will create a profound change, nurturing your soul.`;
            } else if (userData.lifePathNumber === 3 || userData.zodiacSign.element === "Air") {
                predictionText = `Expect a sudden surge of communication and creativity in your **${selectedCategory}** sector. Your ability to express yourself will open doors previously unseen. A casual conversation or an intellectual pursuit holds the key to your next major step.`;
            } else if (userData.lifePathNumber === 4 || userData.zodiacSign.element === "Earth") {
                predictionText = `Structure and diligence are your allies in **${selectedCategory}**. The practical influence of your Earth element and Life Path ${userData.lifePathNumber} stability ensures that groundwork laid now will yield a solid, lasting reward. Remain grounded and build steadily.`;
            } else { // Fallback for other Life Path numbers and general advice
                predictionText = `The cosmic currents point to an unexpected opportunity in your realm of **${selectedCategory}**. Pay attention to synchronicity and the guidance of your Birth Moon phase, **${userData.moonPhase}**. Trust the universe's timing and be ready for a philosophical shift.`;
            }
            
            // Further refinement based on Moon Phase at birth
            if (userData.moonPhase.includes("Full")) {
                predictionText += " **A culmination of past efforts is at hand. Prepare for a major, unavoidable revelation.**";
            } else if (userData.moonPhase.includes("New")) {
                predictionText += " **A fresh start is imminent. Seed a new intention in your life's garden and watch it grow.**";
            }
            
            return {
                text: predictionText,
                category: selectedCategory,
                source: 'Algorithm'
            };
        }
        // === END MODIFIED: Reveal Future Prediction and populate UI ===

        // New function for past life predictions
        async function getPastLifePrediction(seedModifier) {
            // Seed for determinism is a combination of user's core data
            const seed = `${userData.zodiacSign.name}-${userData.lifePathNumber}-${userData.moonPhase}-pastlife-${seedModifier}`;
            
            // Get a past life prediction based on the zodiac sign
            const pastLifeInsights = userData.zodiacSign.pastLife;
            const selectedInsight = pseudoRandomDeterminism(seed, pastLifeInsights);
            
            return {
                text: selectedInsight,
                category: "Past Life",
                source: 'Cosmic Memory'
            };
        }
        
        // --- Remaining Utility Functions (Modified where needed) ---

        // Calculate zodiac sign
        function calculateZodiacSign(month, day) {
            for (const sign of zodiacSigns) {
                if (
                    (month === sign.startMonth && day >= sign.startDay) ||
                    (month === sign.endMonth && day <= sign.endDay) ||
                    (sign.startMonth > sign.endMonth && (month === sign.startMonth && day >= sign.startDay || month === sign.endMonth && day <= sign.endDay))
                ) {
                    return sign;
                }
            }
            return zodiacSigns[0];
        }

        // Calculate age
        function calculateAge(birthDate) {
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDifference = today.getMonth() - birthDate.getMonth();
            
            if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age;
        }

        // Calculate days lived
        function calculateDaysLived(birthDate) {
            const today = new Date();
            const timeDiff = today.getTime() - birthDate.getTime();
            return Math.floor(timeDiff / (1000 * 3600 * 24));
        }

        // Calculate birth day of week
        function calculateBirthDay(birthDate) {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            return days[birthDate.getDay()];
        }

        // Calculate moon phase at birth (simplified logic)
        function calculateMoonPhase(birthDate) {
            const year = birthDate.getFullYear();
            const month = birthDate.getMonth() + 1;
            const day = birthDate.getDate();
            
            let c, e, jd, b;
            
            if (month < 3) {
                const yearAdjusted = year - 1;
                const monthAdjusted = month + 12;
                c = 365.25 * yearAdjusted;
                e = 30.6 * monthAdjusted;
            } else {
                c = 365.25 * year;
                e = 30.6 * month;
            }
            
            jd = c + e + day - 694039.09;
            jd /= 29.5305882;
            b = parseInt(jd);
            jd -= b;
            b = Math.round(jd * 8);
            
            if (b >= 8) b = 0;
            
            return moonPhases[b];
        }

        // Calculate life path number (numerology)
        function calculateLifePathNumber(birthDate) {
            let sum = 0;
            
            const day = birthDate.getDate();
            const month = birthDate.getMonth() + 1;
            const year = birthDate.getFullYear();
            
            const dateStr = `${day}${month}${year}`;
            
            for (const char of dateStr) {
                sum += parseInt(char);
            }
            
            while (sum > 9 && ![11, 22, 33].includes(sum)) {
                let tempSum = 0;
                while (sum > 0) {
                    tempSum += sum % 10;
                    sum = Math.floor(sum / 10);
                }
                sum = tempSum;
            }
            
            return sum;
        }

        // Format future date
        function getFutureDate() {
            const today = new Date();
            
            // Deterministic random number generator based on user data
            const seed = `${userData.zodiacSign.name}-${userData.lifePathNumber}-${userData.moonPhase}`;
            const hash = Array.from(seed).reduce((h, char) => ((h << 5) - h + char.charCodeAt(0)) | 0, 0);
            const days = (Math.abs(hash) % 30) + 1; // 1 to 30 days
            
            const futureDate = new Date();
            futureDate.setDate(today.getDate() + days);
            
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return `This will manifest around **${futureDate.toLocaleDateString('en-US', options)}**`;
        }

        // === MODIFIED: Update Past Life Insights for non-scrollable area ===
        function updatePastLifeInsights() {
            const pastLifeList = document.getElementById('pastLifeList');
            
            // Clear the list
            pastLifeList.innerHTML = '';
            
            // Generate 3 past life predictions
            for (let i = 0; i < 3; i++) {
                // Get a past life prediction based on the zodiac sign (using modified seed logic)
                const seed = `${userData.zodiacSign.name}-${userData.lifePathNumber}-${userData.moonPhase}-pastlife-${i}`;
                const pastLifeInsights = userData.zodiacSign.pastLife;
                const selectedInsight = pseudoRandomDeterminism(seed, pastLifeInsights);
                
                // Create history item
                const historyItem = document.createElement('div');
                historyItem.classList.add('history-item');
                historyItem.innerHTML = `
                    <div>${selectedInsight}</div>
                    <div class="history-date">Cosmic Memory #${i+1}</div>
                `;
                pastLifeList.appendChild(historyItem);
            }
        }
        // === END MODIFIED: Update Past Life Insights ===


        // === MODIFIED: Generate random tarot cards with flip structure ===
        function generateTarotCards() {
            if (!userData.zodiacSign) {
                // Should not happen if flow is correct, but safe check
                return;
            }

            const tarotCardContainer = document.getElementById('tarotCardContainer');
            const refreshCardsBtn = document.getElementById('refreshCardsBtn');
            
            // Show loading text and clear previous cards
            tarotCardContainer.innerHTML = `<div class="loading-text" id="tarotLoadingText">Drawing Cards...</div>`;
            
            setTimeout(() => {
                // Remove loading text
                const currentLoadingText = document.getElementById('tarotLoadingText');
                if (currentLoadingText) {
                    currentLoadingText.remove();
                }
                tarotCardContainer.innerHTML = '';
                
                // Clear current cards
                currentTarotCards = [];
                
                // Generate 3 random cards (past, present, future)
                const positions = ['Past', 'Present', 'Future'];
                const usedCards = [];
                
                for (let i = 0; i < 3; i++) {
                    // Get a random card that hasn't been used yet
                    let randomCardData;
                    // Use current time/seed to make it truly random on redraw
                    const currentSeed = `${userData.zodiacSign.name}-${userData.lifePathNumber}-${i}-${new Date().getTime()}`;

                    do {
                        // Using a deterministic approach to select a random card based on a unique seed
                        let attemptSeed = currentSeed + usedCards.join(''); 
                        // The index array should be based on the total length of tarotCardDetails (78)
                        randomCardData = tarotCardDetails[pseudoRandomDeterminism(attemptSeed, Array.from({length: tarotCardDetails.length}, (v, k) => k))];
                    } while (usedCards.includes(randomCardData.name));
                    
                    usedCards.push(randomCardData.name);
                    currentTarotCards.push(randomCardData);
                    
                    // Create card element
                    const cardWrapper = document.createElement('div');
                    cardWrapper.classList.add('tarot-card-wrapper');
                    cardWrapper.setAttribute('data-card-index', i); // Store index for retrieval
                    
                    const cardInner = document.createElement('div');
                    cardInner.classList.add('tarot-card-inner');
                    
                    // --- FRONT (Image) ---
                    const cardFront = document.createElement('div');
                    cardFront.classList.add('tarot-card-front');
                    const cardImage = document.createElement('img');
                    // UPDATED: Using the exact card name and .jpg extension as requested
                    cardImage.src = `Tarrot Card's/${randomCardData.imageName}.jpg`;
                    cardImage.alt = randomCardData.name;
                    cardImage.title = randomCardData.name;
                    
                    // Handle image loading error
                    cardImage.onerror = function() {
                        // If the specific card image doesn.t exist, use a placeholder
                        this.src = 'https://picsum.photos/seed/tarot' + Math.floor(Math.random() * 1000) + '/140/230.jpg';
                    };
                    cardFront.appendChild(cardImage);
                    
                    // --- BACK (Position Text) ---
                    const cardBack = document.createElement('div');
                    cardBack.classList.add('tarot-card-back');
                    // MODIFIED: Updated text on the back for clarity
                    cardBack.innerHTML = `
                        <p>${positions[i]}</p>
                        <p>Tap/Click to Reveal</p>
                    `;
                    
                    cardInner.appendChild(cardFront);
                    cardInner.appendChild(cardBack);
                    
                    const cardNameDisplay = document.createElement('div');
                    cardNameDisplay.classList.add('tarot-card-name');
                    cardNameDisplay.textContent = `${positions[i]}: ${randomCardData.name}`;
                    
                    cardWrapper.appendChild(cardInner);
                    cardWrapper.appendChild(cardNameDisplay);
                    
                    // Add click handler to flip and show details
                    cardWrapper.addEventListener('click', function() {
                        cardInner.classList.toggle('flipped'); // Flip the card
                        
                        // Wait for the flip animation to complete (0.6s) before showing modal
                        setTimeout(() => {
                            showCardDetails(randomCardData);
                        }, 300); // 300ms is halfway through the animation
                    });
                    
                    tarotCardContainer.appendChild(cardWrapper);
                }

                // Update the button state after drawing new cards
                if (tarotRedrawsLeft === 0) {
                    refreshCardsBtn.textContent = 'No More Draws Left';
                    refreshCardsBtn.disabled = true;
                    refreshCardsBtn.style.opacity = 0.5;
                    refreshCardsBtn.style.cursor = 'default';
                }
            }, 500); // Simulate network/drawing delay
        }
        
        // === NEW: Show card details modal and handle mobile scroll lock ===
        function showCardDetails(cardData) {
            const modal = document.getElementById('cardDetailsModal');
            const modalContent = document.getElementById('modalContent');
            const closeModalBtn = document.getElementById('closeModalBtn');
            
            // Add scroll lock to the body
            document.body.classList.add('modal-open');

            document.getElementById('modalCardName').textContent = cardData.name;
            document.getElementById('modalCardDescription').textContent = cardData.description;
            document.getElementById('modalCardUpright').textContent = cardData.upright;
            document.getElementById('modalCardReversed').textContent = cardData.reversed;
            
            const modalImage = document.getElementById('modalCardImage');
            modalImage.src = `Tarrot Card's/${cardData.imageName}.jpg`;
            modalImage.alt = cardData.name;
            modalImage.onerror = function() {
                this.src = 'https://picsum.photos/seed/tarot' + Math.floor(Math.random() * 1000) + '/180/290.jpg';
            };
            
            modal.classList.add('active');
            
            // --- Modal Close Logic ---
            const closeModalHandler = function() {
                // Remove scroll lock from the body
                document.body.classList.remove('modal-open'); 
                
                modal.classList.remove('active');
                
                // Find all flipped cards and flip them back
                document.querySelectorAll('.tarot-card-inner.flipped').forEach(card => {
                    card.classList.remove('flipped');
                });
                
                // Clean up listeners
                document.onkeydown = null; // Clear ESC handler
            };
            
            closeModalBtn.onclick = closeModalHandler;
            
            // Close when clicking outside the modal
            modal.onclick = function(event) {
                // Check if the click occurred on the overlay itself, not the content
                if (event.target.id === 'cardDetailsModal') {
                    closeModalHandler();
                }
            };
            
            // Close with ESC key
            document.onkeydown = function(event) {
                if (event.key === "Escape") {
                    closeModalHandler();
                }
            };
            // -------------------------
        }
        // === END NEW: Show card details modal and handle mobile scroll lock ===


        // Format date input as user types
        function formatDateInput(input) {
            // Remove any non-digit characters
            let value = input.value.replace(/\D/g, '');
            
            // Don't format if the input is empty
            if (value.length === 0) {
                return;
            }
            
            // Handle different input lengths
            if (value.length <= 2) {
                // Just the day
                input.value = value;
            } else if (value.length <= 4) {
                // Day and month
                input.value = `${value.slice(0, 2)}/${value.slice(2)}`;
            } else if (value.length <= 8) {
                // Day, month, and year
                input.value = `${value.slice(0, 2)}/${value.slice(2, 4)}/${value.slice(4, 8)}`;
            } else {
                // If the input is too long, truncate it
                input.value = `${value.slice(0, 2)}/${value.slice(2, 4)}/${value.slice(4, 8)}`;
            }
        }

        // Validate date input
        function validateDateInput(dateString) {
            // Check if the input matches DD/MM/YYYY format
            const regex = /^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/;
            if (!regex.test(dateString)) {
                return false;
            }
            
            // Parse the date
            const parts = dateString.split('/');
            const day = parseInt(parts[0], 10);
            const month = parseInt(parts[1], 10);
            const year = parseInt(parts[2], 10);
            
            // Check if the date is valid
            const date = new Date(year, month - 1, day);
            if (
                date.getFullYear() !== year ||
                date.getMonth() !== month - 1 ||
                date.getDate() !== day
            ) {
                return false;
            }
            
            // Check if the date is not in the future
            const today = new Date();
            if (date > today) {
                return false;
            }
            
            // Check if the date is reasonable (not too far in the past)
            const minDate = new Date();
            minDate.setFullYear(today.getFullYear() - 120);
            if (date < minDate) {
                return false;
            }
            
            return true;
        }

        // === MODIFIED JAVASCRIPT FUNCTION FOR CONTINUOUS BOUNCING TABS ===
        function startContinuousTabAnimation() {
            // Clear any existing interval to prevent multiple animations running simultaneously
            if (tabAnimationInterval) {
                clearInterval(tabAnimationInterval);
            }

            const tabs = Array.from(document.querySelectorAll('.zodiac-tab'));

            // Set the interval to run every 2000 milliseconds (2 seconds) as requested
            tabAnimationInterval = setInterval(() => {
                const inactiveTabs = tabs.filter(tab => !tab.classList.contains('active'));

                if (inactiveTabs.length === 0) {
                    return; // Don't animate if all tabs are active (unlikely)
                }

                // Randomly select one inactive tab
                const randomIndex = Math.floor(Math.random() * inactiveTabs.length);
                const randomTab = inactiveTabs[randomIndex];

                // Check if the randomly selected tab is already bouncing
                if (randomTab.classList.contains('bouncing')) {
                    return; // Skip this iteration, let the current bounce finish
                }

                // Animate the selected tab
                randomTab.classList.add('bouncing');

                // Remove the class after the animation duration (0.6s)
                randomTab.addEventListener('animationend', function handler() {
                    randomTab.classList.remove('bouncing');
                    // Remove the event listener to prevent memory leaks
                    randomTab.removeEventListener('animationend', handler);
                });

            }, 2000); // 2-second pause between each bounce
        }

        function stopContinuousTabAnimation() {
            if (tabAnimationInterval) {
                clearInterval(tabAnimationInterval);
                tabAnimationInterval = null;
                // Ensure all tabs stop bouncing immediately
                document.querySelectorAll('.zodiac-tab').forEach(tab => {
                    tab.classList.remove('bouncing');
                });
            }
        }
        // =================================================

        // Display zodiac details based on selected tab
        function displayZodiacDetails(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.zodiac-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show the selected tab content
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Update the active tab button
            document.querySelectorAll('.zodiac-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });
            
            // Re-start the continuous animation to immediately reflect the new active tab status
            // This implicitly stops and restarts the animation
            startContinuousTabAnimation();

            // If the predictions tab is selected and predictions haven't been generated yet, generate them
            // Or if predictions are already generated but the future reveal is hidden (e.g. on first visit to tab)
            if (tabName === 'predictions' && !predictionsGenerated) {
                predictionsGenerated = true;
                revealFuture();
            } else if (tabName === 'predictions' && predictionsGenerated) {
                 document.getElementById('futureReveal').classList.add('active', 'visible');
            }
            
            // If the tarot tab is selected and cards haven't been generated yet, generate them
            if (tabName === 'tarot' && currentTarotCards.length === 0) {
                generateTarotCards();
            }
        }

        // Handle DOB form submission
        function handleDobSubmission() {
            const dobInput = document.getElementById('dobInput');
            const dobForm = document.getElementById('dobForm');
            const userInfo = document.getElementById('userInfo');
            const zodiacSignElement = document.getElementById('zodiacSign');
            const userDetailsElement = document.getElementById('userDetails');
            const ageValueElement = document.getElementById('ageValue');
            const daysValueElement = document.getElementById('daysValue');
            const birthDayValueElement = document.getElementById('birthDayValue');
            const moonPhaseValueElement = document.getElementById('moonPhaseValue');
            const cosmicEssenceElement = document.getElementById('cosmicEssence');
            const resetBtn = document.getElementById('resetBtn');
            const dateError = document.getElementById('dateError');
            const header = document.getElementById('mainHeader'); 
            const container = document.getElementById('mainContainer'); 
            const menuAvatarWrapper = document.getElementById('menu-avatar-wrapper');

            if (!dobInput.value) {
                dobInput.classList.add('invalid');
                dateError.classList.add('visible');
                return;
            }
            
            // Validate the date
            if (!validateDateInput(dobInput.value)) {
                dobInput.classList.add('invalid');
                dateError.classList.add('visible');
                return;
            }
            
            // Clear any error states
            dobInput.classList.remove('invalid');
            dateError.classList.remove('visible');
            
            // Parse the date string (DD/MM/YYYY format)
            const parts = dobInput.value.split('/');
            const day = parseInt(parts[0], 10);
            const month = parseInt(parts[1], 10);
            const year = parseInt(parts[2], 10);
            const birthDate = new Date(year, month - 1, day);
            
            // Calculate user data
            userData.dob = birthDate;
            userData.zodiacSign = calculateZodiacSign(month, day);
            userData.age = calculateAge(birthDate);
            userData.daysLived = calculateDaysLived(birthDate);
            userData.birthDay = calculateBirthDay(birthDate);
            userData.moonPhase = calculateMoonPhase(birthDate);
            userData.lifePathNumber = calculateLifePathNumber(birthDate);
            
            // Update UI
            dobForm.classList.add('hidden');
            userInfo.classList.add('visible');
            resetBtn.classList.add('visible');
            
            // Hide header with animation and adjust container padding
            header.classList.add('hidden');
            container.style.paddingTop = '10px';

            // Disable avatar click (if logic is present)
            menuAvatarWrapper.classList.remove('clickable');
            
            // Display user info
            zodiacSignElement.textContent = `${userData.zodiacSign.symbol} ${userData.zodiacSign.name}`;
            userDetailsElement.innerHTML = `
                Life Path: ${userData.lifePathNumber} | Element: ${userData.zodiacSign.element} | Ruler: ${userData.zodiacSign.ruler}
            `;
            
            ageValueElement.textContent = userData.age;
            daysValueElement.textContent = userData.daysLived.toLocaleString();
            birthDayValueElement.textContent = userData.birthDay;
            moonPhaseValueElement.textContent = userData.moonPhase;
            
            cosmicEssenceElement.textContent = userData.zodiacSign.essence;
            
            // Display zodiac details
            document.getElementById('zodiacMotto').textContent = userData.zodiacSign.motto;
            document.getElementById('zodiacHouse').textContent = userData.zodiacSign.house;
            document.getElementById('zodiacRuler').textContent = userData.zodiacSign.ruler;
            document.getElementById('zodiacElement').textContent = userData.zodiacSign.element;
            document.getElementById('zodiacNumber').textContent = userData.zodiacSign.numbers.join(', ');
            document.getElementById('lifePathNumber').textContent = userData.lifePathNumber;
            
            // Display character traits
            const traitsList = document.getElementById('traitsList');
            traitsList.innerHTML = '';
            userData.zodiacSign.characterTraits.forEach(trait => {
                const traitElement = document.createElement('div');
                traitElement.classList.add('trait-item');
                traitElement.textContent = trait;
                traitsList.appendChild(traitElement);
            });
            
            // Display luck information
            const luckItems = document.getElementById('luckItems');
            luckItems.innerHTML = '';
            
            Object.entries(userData.zodiacSign.luckyElements).forEach(([key, values]) => {
                const luckItem = document.createElement('div');
                luckItem.classList.add('luck-item');
                
                const label = document.createElement('div');
                label.classList.add('luck-label');
                label.textContent = key.charAt(0).toUpperCase() + key.slice(1) + ':';
                
                const value = document.createElement('div');
                value.classList.add('luck-value');
                value.textContent = Array.isArray(values) ? values.join(', ') : values;
                
                luckItem.appendChild(label);
                luckItem.appendChild(value);
                luckItems.appendChild(luckItem);
            });
            
            // Display tarot cards
            const tarotCardsElement = document.getElementById('tarotCards');
            tarotCardsElement.innerHTML = `
                <div class="tarot-card">${userData.zodiacSign.tarotCards.sign} (Sign)</div>
                <div class="tarot-card">${userData.zodiacSign.tarotCards.ruler} (Ruler)</div>
            `;
            
            // Display decans
            const decansListElement = document.getElementById('decansList');
            decansListElement.innerHTML = '';
            userData.zodiacSign.decans.forEach(decan => {
                const decanElement = document.createElement('div');
                decanElement.classList.add('decan');
                decanElement.innerHTML = `
                    <div class="decan-date">${decan.dateRange}</div>
                    <div class="decan-card">${decan.card} (${decan.degrees})</div>
                `;
                decansListElement.appendChild(decanElement);
            });
            
            // Display zodiactivities
            const zodiactivitiesListElement = document.getElementById('zodiactivitiesList');
            zodiactivitiesListElement.innerHTML = '';
            userData.zodiacSign.zodiactivities.forEach(activity => {
                const activityElement = document.createElement('div');
                activityElement.classList.add('zodiactivity-item');
                activityElement.textContent = activity;
                zodiactivitiesListElement.appendChild(activityElement);
            });
            
            // Ensure the refresh button is enabled/correctly labeled on new user submission
            const refreshCardsBtn = document.getElementById('refreshCardsBtn');
            refreshCardsBtn.textContent = 'Draw New Cards';
            refreshCardsBtn.disabled = false;
            refreshCardsBtn.style.opacity = 1;
            refreshCardsBtn.style.cursor = 'pointer';
            tarotRedrawsLeft = 1;


            // --- START THE CONTINUOUS BOUNCING ANIMATION ---
            startContinuousTabAnimation();
            // -------------------------------------------------------------------
        }

        // Reset function
        function reset() {
            const dobForm = document.getElementById('dobForm');
            const userInfo = document.getElementById('userInfo');
            const futureReveal = document.getElementById('futureReveal');
            const resetBtn = document.getElementById('resetBtn');
            const dobInput = document.getElementById('dobInput');
            const hiddenDateInput = document.getElementById('hiddenDateInput');
            const dateError = document.getElementById('dateError');
            const header = document.getElementById('mainHeader'); 
            const container = document.getElementById('mainContainer'); 
            const menuAvatarWrapper = document.getElementById('menu-avatar-wrapper');
            const modalAvatarWrapper = document.getElementById('modal-avatar-wrapper');

            // --- AVATAR CLICK LOGIC FIX: Disable Avatar Clicks when main page is active ---
            menuAvatarWrapper.classList.remove('clickable');
            // The modal avatar wrapper is hidden when the modal is inactive, but keep it disabled for safety
            modalAvatarWrapper.classList.remove('clickable'); 
            // -----------------------------------------------------------------------------
            
            dobForm.classList.remove('hidden');
            userInfo.classList.remove('visible');
            futureReveal.classList.remove('active', 'visible');
            resetBtn.classList.remove('visible');
            
            // Show header again when resetting and adjust container padding
            header.classList.remove('hidden');
            // Reset to the initial large padding top, matching the style for container initialization
            container.style.paddingTop = '150px'; 
            
            showErrorMessage(false);
            
            // Clear both date inputs
            dobInput.value = '';
            hiddenDateInput.value = '';
            dobInput.classList.remove('invalid');
            dateError.classList.remove('visible');
            
            userData = {
                dob: null,
                zodiacSign: null,
                age: null,
                daysLived: null,
                birthDay: null,
                moonPhase: null,
                lifePathNumber: null
            };
            
            predictionHistory = [];
            currentTarotCards = [];
            predictionsGenerated = false;
            tarotRedrawsLeft = 1; // Reset redraws left
            // Cleared the old history list for the redesign
            document.getElementById('pastLifeList').innerHTML = ''; 
            
            // Reset to the first tab
            document.querySelectorAll('.zodiac-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === 'essence') {
                    tab.classList.add('active');
                }
            });
            
            document.querySelectorAll('.zodiac-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById('essence-tab').classList.add('active');
            
            // Reset the tarot card container to its initial state
            document.getElementById('tarotCardContainer').innerHTML = `<div class="loading-text" id="tarotLoadingText">Drawing Cards...</div>`;
            
            // Reset the refresh cards button state
            const refreshCardsBtn = document.getElementById('refreshCardsBtn');
            refreshCardsBtn.textContent = 'Draw New Cards';
            refreshCardsBtn.disabled = false;
            refreshCardsBtn.style.opacity = 1;
            refreshCardsBtn.style.cursor = 'pointer';


            // --- STOP THE CONTINUOUS BOUNCING ANIMATION ---
            stopContinuousTabAnimation();
            // ----------------------------------------------
        }

        // --- MODIFIED MUSIC LOGIC FOR RANDOM PLAYLIST ---
        const musicFolder = "Music";
        const totalTracks = 10; // Represents files 0.mp3 through 9.mp3

        // Helper to pick and play a random track
        function playRandomTrack() {
            const backgroundMusic = document.getElementById('backgroundMusic');
            // Generate random number between 0 and 9
            const trackNumber = Math.floor(Math.random() * totalTracks);
            const trackPath = `${musicFolder}/${trackNumber}.mp3`;
            
            // console.log("Playing track:", trackPath); // For debugging
            backgroundMusic.src = trackPath;
            
            // We return the promise so calling functions can handle success/failure
            return backgroundMusic.play();
        }

        // Initialize music
        function initializeMusic() {
            const backgroundMusic = document.getElementById('backgroundMusic');
            const musicIcon = document.getElementById('musicIcon');
            
            // Set volume
            backgroundMusic.volume = 0.3;

            // We removed the 'loop' attribute in HTML. 
            // Add an event listener to detect when a song ends, then play a new random one.
            backgroundMusic.addEventListener('ended', () => {
                playRandomTrack().catch(e => {
                    console.log("Autoplay blocked on next track:", e);
                });
            });
            
            // Try to play random music initially (will likely be blocked by browser)
            const playPromise = playRandomTrack();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    // Autoplay started successfully
                    isMusicPlaying = true;
                    musicIcon.src = 'on.png';
                    musicInitialized = true;
                }).catch(error => {
                    // Autoplay was prevented
                    console.log('Autoplay was prevented:', error);
                    isMusicPlaying = false;
                    musicIcon.src = 'off.png';
                    musicInitialized = true;
                    
                    // The notification message is now prohibited by the user request.
                });
            }
        }

        // --- IDENTITY MENU JAVASCRIPT LOGIC (MERGED) ---
        // Note: Global click listener must be handled carefully to not interfere with Oracle events
        document.addEventListener('DOMContentLoaded', () => {
            // --- IDENTITY SECURITY ---
            document.addEventListener('contextmenu', event => event.preventDefault());
            document.addEventListener('copy', (e) => { e.preventDefault(); });
            
            // --- IDENTITY REFERENCES ---
            const menuTrigger = document.getElementById('menu-trigger');
            const sidebar = document.getElementById('sidebar');
            const closeSidebar = document.getElementById('close-sidebar');
            const homeResetLink = document.getElementById('close-home-reset'); // New link to reset page
            const menuAvatarWrapper = document.getElementById('menu-avatar-wrapper'); // ADDED
            const modalAvatarWrapper = document.getElementById('modal-avatar-wrapper'); // ADDED

            // Identity Elements
            const openIdentity = document.getElementById('open-identity');
            const identityModal = document.getElementById('identity-modal');
            const closeIdentity = document.getElementById('close-modal');

            // About Elements (Smart Fallback)
            const openAbout = document.getElementById('open-about');
            const aboutOverlay = document.getElementById('about-overlay');
            const closeAbout = document.getElementById('close-about');
            const aboutContainer = document.getElementById('about-container');
            const aboutTitle = document.getElementById('about-title');
            const aboutContent = document.getElementById('about-content');

            // Viewer Elements
            const imageViewer = document.getElementById('image-viewer');
            const fullImage = document.getElementById('full-image');
            const viewerFallback = document.getElementById('viewer-fallback');
            const fallbackInitials = document.getElementById('fallback-initials');
            const viewerTrigger = document.getElementById('viewer-close-trigger');
            
            // Config from original Identity file
            const config = { name: "Shyam Bodhak", imgUrl: "avatar.png" };
            let isImageAvailable = false;
            
            // ORACLE REFERENCES
            const dobInput = document.getElementById('dobInput');
            const hiddenDateInput = document.getElementById('hiddenDateInput');
            const calendarIcon = document.getElementById('calendarIcon');
            const musicToggle = document.getElementById('musicToggle');
            const refreshCardsBtn = document.getElementById('refreshCardsBtn');
            const backgroundMusic = document.getElementById('backgroundMusic');
            const musicIcon = document.getElementById('musicIcon');


            // --- IDENTITY UI LOGIC ---
            
            // FIX: Unified function to manage avatar clickability
            function updateAvatarClickability() {
                const sidebarActive = sidebar.classList.contains('active');
                const identityModalActive = identityModal.classList.contains('active');
                
                // Avatar is clickable ONLY when the sidebar OR identity modal is open
                if (sidebarActive || identityModalActive) {
                    menuAvatarWrapper.classList.add('clickable');
                    modalAvatarWrapper.classList.add('clickable');
                } else {
                    menuAvatarWrapper.classList.remove('clickable');
                    modalAvatarWrapper.classList.remove('clickable');
                }
            }
            // Initial call to set the default state (not clickable)
            updateAvatarClickability();


            function toggleMenu(open) {
                if(open) { 
                    sidebar.classList.add('active'); 
                    menuTrigger.classList.add('hidden'); 
                    document.body.style.overflow = 'hidden';
                } 
                else { 
                    sidebar.classList.remove('active'); 
                    menuTrigger.classList.remove('hidden'); 
                    // Restore original overflow behaviour if no other modal is open
                    if (!document.getElementById('cardDetailsModal').classList.contains('active') && !identityModal.classList.contains('active') && !aboutOverlay.classList.contains('active')) {
                        document.body.style.overflow = 'scroll';
                    }
                }
                updateAvatarClickability(); // Update state on menu change
            }

            menuTrigger.addEventListener('click', () => toggleMenu(true));
            closeSidebar.addEventListener('click', () => toggleMenu(false));
            
            // Handle Home/Reset link click
            homeResetLink.addEventListener('click', (e) => {
                e.preventDefault();
                toggleMenu(false); // Close the sidebar
                reset(); // Reset the Oracle page state
            });


            // Close sidebar when clicking outside
            document.addEventListener('click', (e) => {
                const isClickInsideSidebar = sidebar.contains(e.target);
                const isClickOnMenuTrigger = menuTrigger.contains(e.target);
                
                if (sidebar.classList.contains('active') && !isClickInsideSidebar && !isClickOnMenuTrigger) {
                    if (!identityModal.contains(e.target) && !aboutOverlay.contains(e.target) && !imageViewer.contains(e.target)) {
                        toggleMenu(false);
                    }
                }
            });

            // Identity Modal
            function toggleIdentity(show) {
                if(show) { 
                    toggleMenu(false); 
                    identityModal.classList.add('active'); 
                    document.body.style.overflow = 'hidden';
                } 
                else { 
                    identityModal.classList.remove('active');
                    // Restore overflow
                    if (!sidebar.classList.contains('active') && !aboutOverlay.classList.contains('active') && !document.getElementById('cardDetailsModal').classList.contains('active')) {
                         document.body.style.overflow = 'scroll';
                    }
                }
                updateAvatarClickability(); // Update state on identity modal change
            }
            openIdentity.addEventListener('click', (e) => { e.preventDefault(); toggleIdentity(true); });
            closeIdentity.addEventListener('click', () => toggleIdentity(false));
            identityModal.addEventListener('click', (e) => { 
                // Only close if clicking the backdrop, not the card itself
                if(e.target === identityModal) toggleIdentity(false); 
            });


            // --- SMART FALLBACK LOGIC (ABOUT SECTION) ---

            async function loadAboutData() {
                // 1. Try JSON
                let success = await tryLoadJSON();
                
                // 2. If JSON failed, Try Text
                if (!success) {
                    success = await tryLoadText();
                }

                // 3. If successful, show logic handles css, otherwise blank
                if (success) {
                    aboutContainer.style.opacity = 1;
                    aboutContainer.style.transform = 'translateY(0)';
                } else {
                     // *** FALLBACK LOGIC: Set colors for error message ***
                     aboutTitle.innerText = "Error Loading Data";
                     aboutContent.innerHTML = "Could not fetch content from 'data.json' or 'data.txt'. Please check file paths.";
                     
                     // Use the fallback colors defined in CSS and the :root block
                     aboutTitle.style.color = 'var(--accent-purple)'; 
                     aboutContent.style.color = 'var(--text-gray)';
                     closeAbout.style.color = 'var(--text-gray)';
                     aboutOverlay.style.backgroundColor = 'var(--about-fallback-bg)'; // Set fallback BG
                     document.documentElement.style.setProperty('--about-link-color', 'var(--accent-cyan)');

                     aboutContainer.style.opacity = 1;
                     aboutContainer.style.transform = 'translateY(0)';
                }
            }

            // JSON LOADER
            async function tryLoadJSON() {
                try {
                    const response = await fetch('data.json');
                    if (!response.ok) return false;
                    const data = await response.json();
                    applyAboutData(data.title, data.content, data.headlineColor, data.textColor, data.linkColor, data.backgroundColor);
                    return true;
                } catch (e) { return false; }
            }

            // TEXT LOADER
            async function tryLoadText() {
                try {
                    const response = await fetch('data.txt');
                    if (!response.ok) return false;
                    const text = await response.text();
                    const lines = text.split('\n');
                    if(lines.length < 6) return false; 

                    const title = lines[0];
                    const hColor = lines[1];
                    const tColor = lines[2];
                    const lColor = lines[3];
                    const bgColor = lines[4];
                    const body = lines.slice(5).join('\n');

                    applyAboutData(title, body, hColor, tColor, lColor, bgColor);
                    return true;
                } catch (e) { return false; }
            }

            // APPLY DATA TO OVERLAY
            function applyAboutData(title, content, hColor, tColor, lColor, bgColor) {
                aboutTitle.innerText = title.trim();
                aboutContent.innerHTML = content.trim();

                aboutTitle.style.color = hColor.trim();
                aboutContent.style.color = tColor.trim();
                
                aboutOverlay.style.backgroundColor = bgColor.trim();
                
                document.documentElement.style.setProperty('--about-link-color', lColor.trim());
                
                closeAbout.style.color = tColor.trim();
            }

            function toggleAbout(show) {
                if(show) { 
                    toggleMenu(false); 
                    aboutOverlay.classList.add('active');
                    document.body.style.overflow = 'hidden'; 
                    loadAboutData(); 
                } else { 
                    aboutContainer.style.opacity = 0;
                    aboutContainer.style.transform = 'translateY(20px)';
                    aboutOverlay.classList.remove('active'); 
                    // Restore overflow
                    if (!sidebar.classList.contains('active') && !identityModal.classList.contains('active') && !document.getElementById('cardDetailsModal').classList.contains('active')) {
                         document.body.style.overflow = 'scroll';
                    }
                }
            }

            openAbout.addEventListener('click', (e) => { e.preventDefault(); toggleAbout(true); });
            closeAbout.addEventListener('click', () => toggleAbout(false));
            aboutOverlay.addEventListener('click', (e) => { if(e.target === aboutOverlay) toggleAbout(false); });


            // --- VIEWER LOGIC ---
            function openImageViewer() {
                // Only open if currently clickable (i.e., sidebar or identity modal is open)
                if (menuAvatarWrapper.classList.contains('clickable') || modalAvatarWrapper.classList.contains('clickable')) {
                    imageViewer.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Ensure background is locked
                    if (isImageAvailable) {
                        fullImage.src = config.imgUrl;
                        fullImage.style.display = 'block';
                        viewerFallback.style.display = 'none';
                    } else {
                        fullImage.style.display = 'none';
                        viewerFallback.style.display = 'flex';
                        const initials = config.name.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase();
                        fallbackInitials.innerText = initials;
                    }
                } else {
                    // Prevent any action if avatar is not clickable
                    console.log("Avatar click disabled when menu and identity page are inactive.");
                }
            }

            function closeImageViewer() {
                imageViewer.classList.remove('active');
                setTimeout(() => { fullImage.src = ''; }, 300);
                // Restore original overflow behaviour
                if (!sidebar.classList.contains('active') && !identityModal.classList.contains('active') && !aboutOverlay.classList.contains('active') && !document.getElementById('cardDetailsModal').classList.contains('active')) {
                     document.body.style.overflow = 'scroll';
                }
            }

            // ADDED CHECK INSIDE LISTENER TO RESPECT CLICKABILITY RULE
            menuAvatarWrapper.addEventListener('click', openImageViewer);
            modalAvatarWrapper.addEventListener('click', openImageViewer);

            viewerTrigger.addEventListener('click', closeImageViewer);
            imageViewer.addEventListener('click', (e) => { 
                // Only close if clicking the backdrop, not the image itself
                if(e.target === imageViewer || e.target === viewerTrigger) closeImageViewer(); 
            });


            // --- AVATAR LOADING ---
            function setProfileData(imgId, initialsId) {
                const imgEl = document.getElementById(imgId);
                const initialsEl = document.getElementById(initialsId);
                const initials = config.name.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase();

                initialsEl.innerText = initials;
                const tempImg = new Image();
                tempImg.src = config.imgUrl;
                
                tempImg.onload = () => {
                    isImageAvailable = true;
                    imgEl.src = config.imgUrl;
                    imgEl.style.display = 'block';
                    initialsEl.style.display = 'none';
                };
                tempImg.onerror = () => {
                    isImageAvailable = false;
                    imgEl.style.display = 'none';
                    initialsEl.style.display = 'flex'; 
                };
            }

            setProfileData('menu-avatar', 'menu-initials');
            setProfileData('modal-avatar', 'modal-initials');
        
            // --- COSMIC ORACLE INIT LOGIC (COPIED) ---
            
            // Initialize music (Random logic inside)
            initializeMusic();
            
            // Add event listeners
            document.getElementById('submitDob').addEventListener('click', handleDobSubmission);
            document.getElementById('resetBtn').addEventListener('click', reset);

            // --- MODIFIED: Refresh Cards Button Logic ---
            refreshCardsBtn.addEventListener('click', () => {
                if (tarotRedrawsLeft > 0) {
                    generateTarotCards();
                    tarotRedrawsLeft--;
                }
            });
            // ------------------------------------------
            
            // Calendar icon click event
            calendarIcon.addEventListener('click', () => {
                hiddenDateInput.click();
            });
            
            // Hidden date input change event
            hiddenDateInput.addEventListener('change', (e) => {
                const date = new Date(e.target.value);
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                
                dobInput.value = `${day}/${month}/${year}`;
                dobInput.classList.remove('invalid');
                document.getElementById('dateError').classList.remove('visible');
            });
            
            // Format date as user types
            dobInput.addEventListener('input', (e) => {
                // Clear error state when user starts typing
                dobInput.classList.remove('invalid');
                document.getElementById('dateError').classList.remove('visible');
                
                // Format the input
                formatDateInput(e.target);
            });
            
            // Add enter key support for DOB form
            dobInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleDobSubmission();
                }
            });
            
            // Add tab switching functionality
            document.querySelectorAll('.zodiac-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    displayZodiacDetails(tabName);
                });
            });
            
            // Music toggle event
            musicToggle.addEventListener('click', () => {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    musicIcon.src = 'off.png';
                    isMusicPlaying = false;
                } else {
                    // If music hasn't started yet (src might not be set if init failed completely, though unlikely)
                    // or if paused, just play.
                    // If the src is empty (unlikely with current logic), pick a track.
                    if (!backgroundMusic.src) {
                         playRandomTrack().then(() => {
                            musicIcon.src = 'on.png';
                            isMusicPlaying = true;
                         });
                    } else {
                        backgroundMusic.play().then(() => {
                            musicIcon.src = 'on.png';
                            isMusicPlaying = true;
                        }).catch(error => {
                            console.log('Error playing music:', error);
                        });
                    }
                }
            });
            
            // Add a global click event listener to unlock audio
            document.addEventListener('click', function unlockAudio() {
                if (!musicUnlocked && musicInitialized) {
                    // Check if music is already playing via autoplay
                    if (isMusicPlaying) {
                         musicUnlocked = true;
                         return;
                    }

                    // Try to play random music
                    const playPromise = backgroundMusic.src ? backgroundMusic.play() : playRandomTrack();
                    
                    playPromise.then(() => {
                        // If play succeeds, update the UI
                        musicIcon.src = 'on.png';
                        isMusicPlaying = true;
                        musicUnlocked = true;
                        
                    }).catch(error => {
                        console.log('Error unlocking audio:', error);
                    });
                }
            }, { once: false });
            
            // Add a touch event listener for mobile devices
            document.addEventListener('touchstart', function unlockAudioTouch() {
                if (!musicUnlocked && musicInitialized) {
                     if (isMusicPlaying) {
                         musicUnlocked = true;
                         return;
                    }
                    
                    const playPromise = backgroundMusic.src ? backgroundMusic.play() : playRandomTrack();
                    
                    playPromise.then(() => {
                        // If play succeeds, update the UI
                        musicIcon.src = 'on.png';
                        isMusicPlaying = true;
                        musicUnlocked = true;
                        
                    }).catch(error => {
                        console.log('Error unlocking audio (touch):', error);
                    });
                }
            }, { once: false });
        });
    </script>
</body>
</html>
